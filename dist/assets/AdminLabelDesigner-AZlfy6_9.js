import{c as p,d as y,e as E,j as t,X as xe,S as he,D as pe,L as me,n as ue,a9 as R,b as be}from"./index-DNbqce-j.js";import{r}from"./react-vendor-CkwvfVK2.js";import{j as X,o as ge,q as fe,z as ve,D as je,l as ye,t as we,s as ke}from"./firebase-DdpHYWNd.js";import{L as x,Q as Ne,r as Se}from"./labelHelpers-CAArPLe7.js";import{T as Le}from"./type-C4FQ1vum.js";import{G as ze,b as Ce}from"./AdminDashboard-BkhDkzix.js";import{T as Ee}from"./trash-2-CmT6fCSF.js";import"./index-CFK5EZMp.js";import"./index-jHXuI3CI.js";import"./arrow-left-CeHKlJCF.js";import"./users-BzjIxhpA.js";import"./clock-yngyoSLs.js";import"./book-open-Dw5UZXUq.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=p("AlignHorizontalJustifyCenter",[["rect",{width:"6",height:"14",x:"2",y:"5",rx:"2",key:"dy24zr"}],["rect",{width:"6",height:"10",x:"16",y:"7",rx:"2",key:"13zkjt"}],["path",{d:"M12 2v20",key:"t6zp3m"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=p("AlignVerticalJustifyCenter",[["rect",{width:"14",height:"6",x:"5",y:"16",rx:"2",key:"1i8z2d"}],["rect",{width:"10",height:"6",x:"7",y:"2",rx:"2",key:"ypihtt"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=p("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=p("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=p("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=p("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),l=3.78,_=1.5,Ue=({onBack:Y})=>{const[w,q]=r.useState("Nieuw Label"),[c,K]=r.useState("Standard"),[b,M]=r.useState(x.Standard.width),[g,A]=r.useState(x.Standard.height),[o,f]=r.useState([]),[m,u]=r.useState(null),[a,D]=r.useState(1.2),[k,Z]=r.useState(!0),[F,T]=r.useState([]),[N,Pe]=r.useState(null),[He,V]=r.useState(!1),[Oe,W]=r.useState([]),[Be,$]=r.useState(!1),[J,Q]=r.useState([]),[I,v]=r.useState(!1),U=r.useRef(null);r.useEffect(()=>{const e=X(E,...y.LABEL_TEMPLATES),s=ge(e,i=>{Q(i.docs.map(h=>({id:h.id,...h.data()})))},i=>console.error("Sync Error:",i));return()=>s()},[]),r.useEffect(()=>{c!=="Custom"&&x[c]&&(M(x[c].width),A(x[c].height))},[c]);const ee=async()=>{v(!0);try{const e=fe(X(E,...y.PLANNING),ve(15)),s=await je(e);W(s.docs.map(i=>({id:i.id,...i.data()}))),V(!0)}catch(e){console.error("Fout bij ophalen orders:",e)}finally{v(!1)}},te=e=>{const s={id:Date.now().toString(),type:e,x:5,y:5,width:e==="text"?40:e==="line"||e==="box"?30:20,height:e==="text"?10:e==="line"?.5:20,thickness:e==="box"?.5:void 0,content:e==="text"?"HANDMATIGE TEKST":e==="barcode"?"123456":"QR_DATA",fontSize:10,align:"left",fontFamily:"Arial",isBold:!1,rotation:0,variable:""};f([...o,s]),u(s.id)},d=(e,s)=>{f(o.map(i=>i.id===e?{...i,...s}:i))},se=e=>{f(o.filter(s=>s.id!==e)),m===e&&u(null)},P=e=>{if(!m)return;const s=o.find(i=>i.id===m);e==="x"?d(s.id,{x:(b-(s.width||0))/2}):e==="y"&&d(s.id,{y:(g-(s.height||0))/2})},ae=(e,s)=>{e.stopPropagation(),u(s),$(!0);const i=o.find(j=>j.id===s),h=b/2,S=g/2,re=e.clientX,ie=e.clientY,H=j=>{const ne=(j.clientX-re)/a/l,oe=(j.clientY-ie)/a/l;let L=Math.max(0,i.x+ne),z=Math.max(0,i.y+oe);const C=[],B=i.width||0,G=i.height||0,ce=L+B/2,de=z+G/2;Math.abs(ce-h)<_&&(L=h-B/2,C.push({type:"vertical",pos:h})),Math.abs(de-S)<_&&(z=S-G/2,C.push({type:"horizontal",pos:S})),T(C),d(s,{x:L,y:z})},O=()=>{$(!1),T([]),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",O)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",O)},le=async()=>{if(!w.trim())return alert("Geef het label een naam.");v(!0);try{const e=w.replace(/\s+/g,"_").toLowerCase(),s=ye(E,...y.LABEL_TEMPLATES,e);await we(s,{name:w,sizeKey:c,width:b,height:g,elements:o,lastUpdated:ke(),updatedBy:"Admin Designer"}),alert("Label template opgeslagen!")}catch{alert("Fout bij opslaan.")}finally{v(!1)}},n=o.find(e=>e.id===m);return t.jsxs("div",{className:"flex flex-col h-full w-full bg-slate-100 overflow-hidden text-left animate-in fade-in",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 py-3 flex justify-between items-center shadow-sm z-20 shrink-0 h-20",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("button",{onClick:Y,className:"p-3 bg-slate-50 hover:bg-slate-100 rounded-2xl text-slate-400 transition-all flex items-center gap-2 group",children:t.jsx(xe,{size:18,className:"group-hover:rotate-90 transition-transform"})}),t.jsxs("div",{className:"text-left",children:[t.jsxs("h1",{className:"font-black text-slate-900 text-lg uppercase italic tracking-tighter leading-none",children:["Label ",t.jsx("span",{className:"text-blue-600",children:"Architect"})]}),t.jsxs("p",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest mt-1.5 flex items-center gap-1.5",children:[t.jsx(he,{size:10,className:"text-emerald-500"})," Root Sync: /",y.LABEL_TEMPLATES.join("/")]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:ee,className:`flex items-center gap-2 px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest border-2 transition-all ${N?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-white text-slate-600 border-slate-100 hover:bg-slate-50"}`,children:[t.jsx(pe,{size:14}),N?"Live Data Gekoppeld":"Koppel Live Order"]}),t.jsx("div",{className:"flex items-center gap-2 bg-slate-50 border-2 border-slate-100 rounded-2xl p-1",children:t.jsxs("select",{value:c,onChange:e=>K(e.target.value),className:"bg-transparent text-[10px] font-black uppercase outline-none px-4 py-2 cursor-pointer",children:[Object.keys(x).map(e=>t.jsx("option",{value:e,children:x[e].name},e)),t.jsx("option",{value:"Custom",children:"Custom Size"})]})}),t.jsxs("button",{onClick:le,disabled:I,className:"bg-slate-900 text-white px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-blue-600 transition-all shadow-xl active:scale-95 flex items-center gap-3",children:[I?t.jsx(me,{className:"animate-spin",size:16}):t.jsx(ue,{size:16})," ","Opslaan"]})]})]}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("div",{className:"w-72 bg-white border-r border-slate-200 flex flex-col z-10 shrink-0",children:[t.jsxs("div",{className:"p-6 border-b border-slate-50",children:[t.jsx("h3",{className:"text-[10px] font-black uppercase text-slate-400 mb-5 tracking-widest",children:"Componenten"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{type:"text",label:"Tekst",icon:Le},{type:"line",label:"Lijn",icon:De},{type:"box",label:"Kader",icon:Te},{type:"barcode",label:"Barcode",icon:R},{type:"qr",label:"QR Code",icon:Ne}].map(e=>t.jsxs("button",{onClick:()=>te(e.type),className:"flex flex-col items-center justify-center p-4 bg-slate-50 hover:bg-blue-50 hover:text-blue-600 border-2 border-transparent hover:border-blue-100 rounded-[25px] transition-all group active:scale-90",children:[t.jsx(e.icon,{size:22,className:"mb-2 text-slate-400 group-hover:text-blue-500"}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-tighter",children:e.label})]},e.type))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar text-left",children:[t.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Mijn Templates"}),t.jsx("div",{className:"space-y-2",children:J.map(e=>t.jsxs("div",{onClick:()=>window.confirm("Huidig ontwerp overschrijven?")&&(q(e.name),M(e.width),A(e.height),f(e.elements||[]),u(null)),className:"group p-4 bg-slate-50 hover:bg-white rounded-[20px] cursor-pointer border-2 border-transparent hover:border-blue-500 transition-all relative shadow-sm",children:[t.jsx("p",{className:"font-black text-[11px] text-slate-800 uppercase italic tracking-tight",children:e.name}),t.jsxs("p",{className:"text-[9px] font-mono font-bold text-slate-400 mt-1",children:[e.width,"x",e.height,"mm"]})]},e.id))})]})]}),t.jsxs("div",{className:"flex-1 bg-slate-200 relative overflow-hidden flex flex-col items-center justify-center",children:[t.jsxs("div",{className:"absolute top-6 bg-white/90 backdrop-blur rounded-full px-6 py-3 shadow-2xl border border-slate-200 flex items-center gap-6 z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>D(e=>Math.max(.2,e-.1)),className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400",children:t.jsx(Ie,{size:18})}),t.jsxs("span",{className:"text-xs font-black text-slate-800 w-12 text-center",children:[Math.round(a*100),"%"]}),t.jsx("button",{onClick:()=>D(e=>Math.min(2.5,e+.1)),className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400",children:t.jsx($e,{size:18})})]}),t.jsx("div",{className:"w-px h-5 bg-slate-200"}),t.jsx("button",{onClick:()=>Z(!k),className:`p-2 rounded-xl transition-all ${k?"bg-blue-100 text-blue-600":"text-slate-400"}`,children:t.jsx(ze,{size:18})})]}),t.jsx("div",{className:"w-full h-full flex items-center justify-center p-20 overflow-auto",onClick:()=>u(null),children:t.jsxs("div",{ref:U,className:"bg-white shadow-2xl relative transition-all duration-75 overflow-hidden border border-slate-300",style:{width:`${b*l*a}px`,height:`${g*l*a}px`,backgroundImage:k?"radial-gradient(#cbd5e1 1px, transparent 1px)":"none",backgroundSize:`${10*l*a}px ${10*l*a}px`},onClick:e=>e.stopPropagation(),children:[F.map((e,s)=>t.jsx("div",{className:"absolute bg-blue-500/50 z-30 pointer-events-none",style:{left:e.type==="vertical"?`${e.pos*l*a}px`:0,top:e.type==="horizontal"?`${e.pos*l*a}px`:0,width:e.type==="vertical"?"1px":"100%",height:e.type==="horizontal"?"1px":"100%"}},s)),o.map(e=>t.jsx("div",{onMouseDown:s=>ae(s,e.id),className:"absolute cursor-move group select-none",style:{left:`${e.x*l*a}px`,top:`${e.y*l*a}px`,transform:`rotate(${e.rotation||0}deg)`,transformOrigin:"top left"},children:t.jsxs("div",{className:`transition-all ${m===e.id?"ring-2 ring-blue-500 ring-offset-4 bg-blue-50/20":"hover:ring-1 hover:ring-blue-300"} p-0.5`,children:[e.type==="text"&&t.jsx("div",{className:"leading-tight",style:{fontSize:`${e.fontSize*a}px`,fontWeight:e.isBold?"900":"normal",fontFamily:e.fontFamily,width:`${e.width*l*a}px`,height:e.height?`${e.height*l*a}px`:"auto",textAlign:e.align||"left",overflow:"hidden"},children:Se(e,N).content}),e.type==="line"&&t.jsx("div",{style:{width:`${e.width*l*a}px`,height:`${e.height*l*a}px`,backgroundColor:"black"}}),e.type==="box"&&t.jsx("div",{style:{width:`${e.width*l*a}px`,height:`${e.height*l*a}px`,border:`${(e.thickness||1)*l*a}px solid black`,boxSizing:"border-box"}}),(e.type==="barcode"||e.type==="qr")&&t.jsx("div",{className:"bg-slate-50 border border-slate-300 flex items-center justify-center",style:{width:`${(e.width||30)*l*a}px`,height:`${(e.height||30)*l*a}px`},children:t.jsx(R,{size:24*a,className:"text-slate-400"})})]})},e.id))]})})]}),t.jsxs("div",{className:"w-80 bg-white border-l border-slate-200 flex flex-col z-10 shrink-0 shadow-2xl",children:[t.jsx("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50",children:t.jsxs("h3",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest italic flex items-center gap-2",children:[t.jsx(be,{size:14})," Inspector"]})}),t.jsx("div",{className:"p-6 overflow-y-auto flex-1 custom-scrollbar text-left",children:n?t.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-left block ml-1",children:"Inhoud & Variabele"}),t.jsxs("select",{value:n.variable,onChange:e=>d(n.id,{variable:e.target.value,content:e.target.value?`{${e.target.value}}`:"Handmatige Tekst"}),className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-xs font-bold",children:[t.jsx("option",{value:"",children:"Statische Tekst"}),t.jsx("option",{value:"lotNumber",children:"Lotnummer"}),t.jsx("option",{value:"orderId",children:"Ordernummer"}),t.jsx("option",{value:"itemCode",children:"Artikelcode"}),t.jsx("option",{value:"productType",children:"Product Type"}),t.jsx("option",{value:"diameter",children:"Diameter (DN)"}),t.jsx("option",{value:"pressure",children:"Drukklasse (PN)"}),t.jsx("option",{value:"date",children:"Productiedatum"})]}),!n.variable&&t.jsx("input",{type:"text",value:n.content,onChange:e=>d(n.id,{content:e.target.value}),className:"w-full bg-white border-2 border-slate-100 rounded-xl p-3 text-xs font-bold outline-none focus:border-blue-500",placeholder:"Vrije tekst..."})]}),t.jsxs("div",{className:"space-y-4 pt-6 border-t border-slate-50",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-left block ml-1",children:"Layout & Uitlijning"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>P("x"),className:"flex items-center justify-center gap-2 p-3 bg-slate-50 hover:bg-blue-50 rounded-xl text-[10px] font-black uppercase transition-all",children:[t.jsx(Me,{size:14})," Center X"]}),t.jsxs("button",{onClick:()=>P("y"),className:"flex items-center justify-center gap-2 p-3 bg-slate-50 hover:bg-blue-50 rounded-xl text-[10px] font-black uppercase transition-all",children:[t.jsx(Ae,{size:14})," Center Y"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-slate-50",children:[t.jsxs("div",{className:"space-y-1.5 text-left",children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-1",children:"W (mm)"}),t.jsx("input",{type:"number",value:Math.round(n.width),onChange:e=>d(n.id,{width:Number(e.target.value)}),className:"w-full bg-slate-50 p-2.5 rounded-lg border border-slate-100 font-mono text-xs font-bold text-center"})]}),t.jsxs("div",{className:"space-y-1.5 text-left",children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-1",children:"H (mm)"}),t.jsx("input",{type:"number",value:Math.round(n.height||0),onChange:e=>d(n.id,{height:Number(e.target.value)}),className:"w-full bg-slate-50 p-2.5 rounded-lg border border-slate-100 font-mono text-xs font-bold text-center"})]})]}),t.jsxs("button",{onClick:()=>se(n.id),className:"w-full py-4 mt-8 bg-rose-50 text-rose-600 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-rose-100 transition-all flex items-center justify-center gap-2 border border-rose-100 active:scale-95",children:[t.jsx(Ee,{size:16})," Verwijder Element"]})]}):t.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 opacity-50 py-20",children:[t.jsx(Ce,{size:64,className:"animate-pulse"}),t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest mt-4",children:"Element selecteren"})]})})]})]})]})};export{Ue as default};
