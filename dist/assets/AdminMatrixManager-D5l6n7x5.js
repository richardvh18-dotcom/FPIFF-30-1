import{c as te,j as e,E as re,q as Y,G as q,X as se,D,a3 as Z,Z as xe,s as pe,p as ie,C as Ce,g as me,t as ze,n as ae,d as P,e as M,L as J,Q as Be,J as ue,P as Te,S as fe,l as oe,a as Ee,N as Ie,b as _e}from"./index-DNbqce-j.js";import{r as d}from"./react-vendor-CkwvfVK2.js";import{j as je,o as he,q as Ne,B as ve,l as G,t as X,s as ee,G as Oe,x as Re,y as Ae,p as Q}from"./firebase-DdpHYWNd.js";import{A as we}from"./activity-BBrgQQV7.js";import{C as ke}from"./check-CcAUrFwy.js";import{P as H}from"./plus-fTGSighL.js";import{S as ce,P as Me,G as Pe}from"./AdminDashboard-BkhDkzix.js";import{T as ye}from"./type-C4FQ1vum.js";import{T as ne}from"./trash-2-CmT6fCSF.js";import{C as $e}from"./copy-1aL2jCM4.js";import{R as de}from"./refresh-cw-BMZ4Lrni.js";import{F as ge}from"./file-spreadsheet-BlD7PTYV.js";import{T as Le}from"./table-CCPXu8vm.js";import{a as Fe,S as Ge}from"./constants-CTjDY--F.js";import{P as De}from"./pen-CXo9LxCq.js";import"./arrow-left-CeHKlJCF.js";import"./users-BzjIxhpA.js";import"./clock-yngyoSLs.js";import"./book-open-Dw5UZXUq.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=te("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=te("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=te("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=te("TableProperties",[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]),Xe=({libraryData:o,matrixData:m,setMatrixData:c,setHasUnsavedChanges:n})=>{var N,p;const[i,j]=d.useState(((N=o==null?void 0:o.connections)==null?void 0:N[0])||""),f=(o==null?void 0:o.pns)||[],z=(o==null?void 0:o.diameters)||[],k=(s,x)=>{i&&(c(b=>{const w={...b};w[i]||(w[i]={});const R=String(s),a=Number(x);let l=Array.isArray(w[i][R])?[...w[i][R]]:[];return l.includes(a)?l=l.filter(y=>y!==a):l.push(a),w[i][R]=l.sort((y,L)=>y-L),w}),n&&n(!0))},h=(s,x)=>!i||!m[i]?!1:(m[i][String(s)]||[]).includes(Number(x));return(p=o==null?void 0:o.connections)!=null&&p.length?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 text-left",children:[e.jsxs("div",{className:"bg-white p-6 rounded-[32px] border border-slate-200 shadow-sm flex items-center gap-6 overflow-x-auto no-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("div",{className:"p-2.5 bg-orange-50 rounded-2xl text-orange-600 border border-orange-100",children:e.jsx(Y,{size:20})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Selectie:"})]}),e.jsx("div",{className:"flex gap-2",children:o.connections.map(s=>e.jsx("button",{onClick:()=>j(s),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap ${i===s?"bg-orange-500 text-white shadow-lg shadow-orange-200":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:s},s))})]}),e.jsxs("div",{className:"bg-white rounded-[40px] border border-slate-200 shadow-sm overflow-hidden flex flex-col min-h-[500px]",children:[e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50",children:[e.jsx("th",{className:"p-6 border-b border-r border-slate-100 w-32 sticky left-0 z-20 bg-slate-50 shadow-[2px_0_5px_rgba(0,0,0,0.02)]",children:e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase italic",children:[e.jsx(we,{size:14})," PN \\ ID ",e.jsx(be,{size:14})]})}),z.map(s=>e.jsx("th",{className:"p-4 border-b border-slate-100 min-w-[80px] text-center",children:e.jsxs("span",{className:"text-[11px] font-black text-slate-700",children:["ID ",s]})},s))]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/30 transition-colors",children:[e.jsxs("td",{className:"p-6 border-r border-b border-slate-100 font-black text-slate-600 text-sm sticky left-0 z-10 bg-white shadow-[2px_0_5px_rgba(0,0,0,0.02)]",children:["PN ",s]}),z.map(x=>{const b=h(s,x);return e.jsx("td",{onClick:()=>k(s,x),className:"p-1 border-b border-slate-50 text-center cursor-pointer group",children:e.jsx("div",{className:`mx-auto w-10 h-10 rounded-xl flex items-center justify-center transition-all ${b?"bg-emerald-500 text-white shadow-md scale-105":"bg-slate-50 text-transparent group-hover:bg-slate-100 group-hover:text-slate-300"}`,children:e.jsx(ke,{size:20,strokeWidth:4})})},`${s}-${x}`)})]},s))})]})}),e.jsxs("div",{className:"p-6 bg-slate-50/50 border-t border-slate-100 flex items-center gap-3",children:[e.jsx(q,{size:16,className:"text-blue-500"}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Klik op een cel om een combinatie te activeren of deactiveren voor"," ",e.jsx("span",{className:"text-blue-600 font-black",children:i}),". Actieve combinaties zijn direct zichtbaar in de Product Configurator."]})]})]})]}):e.jsxs("div",{className:"bg-white p-20 rounded-[40px] border-2 border-dashed border-slate-200 text-center animate-in fade-in",children:[e.jsx(re,{className:"mx-auto text-slate-300 mb-4",size:48}),e.jsx("p",{className:"font-black text-slate-400 uppercase tracking-widest",children:"Vul eerst de Bibliotheek (Moffen & Diameters) in bij het tabblad Bibliotheek."})]})},He=({title:o,items:m=[],onAdd:c,onRemove:n,placeholder:i,icon:j})=>{const[f,z]=d.useState(""),k=()=>{const N=f.trim();N&&(c(N),z(""))},h=Array.isArray(m)?m:[];return e.jsxs("div",{className:"bg-white rounded-[32px] shadow-sm border border-slate-200 overflow-hidden flex flex-col hover:shadow-xl hover:border-blue-200 transition-all h-full min-h-[400px] animate-in fade-in",children:[e.jsxs("div",{className:"p-5 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j&&e.jsx("span",{className:"text-blue-500",children:j}),e.jsx("h3",{className:"font-black text-slate-800 text-xs uppercase tracking-widest italic",children:o||"Systeemlijst"})]}),e.jsx("span",{className:"text-[10px] font-black bg-blue-600 text-white px-2.5 py-1 rounded-lg shadow-sm",children:h.length})]}),e.jsx("div",{className:"p-5 flex-1 overflow-y-auto custom-scrollbar bg-white",children:e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.length>0?h.map((N,p)=>e.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-4 py-2 rounded-xl text-[11px] font-black text-slate-700 flex items-center gap-3 shadow-sm hover:bg-white hover:border-blue-300 transition-all animate-in zoom-in duration-200 group uppercase",children:[N,e.jsx("button",{onClick:()=>n(N),className:"text-slate-300 hover:text-rose-500 transition-colors",type:"button",title:"Verwijder item",children:e.jsx(se,{size:14,strokeWidth:3})})]},`${N}-${p}`)):e.jsx("div",{className:"w-full py-10 text-center opacity-20 italic",children:e.jsx("p",{className:"text-xs font-bold uppercase tracking-tighter",children:"Geen data beschikbaar"})})})}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-white border-2 border-slate-100 rounded-xl px-4 py-3 text-xs font-bold outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/5 transition-all placeholder:text-slate-300",placeholder:i||"Nieuwe waarde...",value:f,onChange:N=>z(N.target.value),onKeyDown:N=>N.key==="Enter"&&k()}),e.jsx("button",{onClick:k,disabled:!f.trim(),className:"bg-slate-900 text-white px-5 py-3 rounded-xl hover:bg-blue-600 disabled:opacity-20 transition-all flex items-center justify-center shadow-lg active:scale-90",type:"button",children:e.jsx(H,{size:20,strokeWidth:3})})]})]})},qe=({libraryData:o,setLibraryData:m,setHasUnsavedChanges:c,blueprints:n={}})=>{const[i,j]=d.useState(null),[f,z]=d.useState("product_names"),k=(p,s)=>{m(x=>{const b=Array.isArray(x[p])?[...x[p]]:[];return b.includes(s)?x:{...x,[p]:[...b,s].sort((R,a)=>!isNaN(R)&&!isNaN(a)?Number(R)-Number(a):String(R).localeCompare(String(a)))}}),c&&c(!0)},h=(p,s)=>{m(x=>({...x,[p]:(x[p]||[]).filter(b=>b!==s)})),c&&c(!0)},N=[{id:"connections",title:"Mof Verbindingen",icon:e.jsx(Y,{size:18}),placeholder:"Bijv. CB/CB...",key:"connections"},{id:"diameters",title:"Diameters (ID)",icon:e.jsx(be,{size:18}),placeholder:"Bijv. 350...",key:"diameters"},{id:"pns",title:"Drukklassen (PN)",icon:e.jsx(we,{size:18}),placeholder:"Bijv. 16...",key:"pns"},{id:"product_names",title:"Product Types",icon:e.jsx(ye,{size:18}),placeholder:"Bijv. Elbow...",key:"product_names"},{id:"borings",title:"Boring Types",icon:e.jsx(Z,{size:18}),placeholder:"Bijv. DIN 10...",key:"borings"},{id:"codes",title:"Extra Codes",icon:e.jsx(xe,{size:18}),placeholder:"Bijv. A1S1...",key:"codes"}];return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 text-left",children:[e.jsxs("div",{className:"bg-blue-600 p-8 rounded-[40px] text-white shadow-xl shadow-blue-200 relative overflow-hidden flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 rotate-12",children:e.jsx(D,{size:150})}),e.jsx("div",{className:"p-4 bg-white/10 rounded-3xl backdrop-blur-md border border-white/20 shrink-0",children:e.jsx(ce,{size:40,className:"text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-2xl font-black uppercase italic tracking-tighter mb-2",children:"Master Bibliotheek"}),e.jsx("p",{className:"text-sm font-bold text-blue-100/80 leading-relaxed max-w-2xl",children:"Beheer hier de kern-parameters van de fabriek. Deze waarden vormen de basis voor de Matrix, de Product Configurator en de Werkstation Terminals."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(p=>e.jsx(He,{title:p.title,icon:p.icon,placeholder:p.placeholder,items:o[p.key]||[],onAdd:s=>k(p.key,s),onRemove:s=>h(p.key,s)},p.id))}),e.jsxs("div",{className:"mt-10 bg-white rounded-[32px] shadow-sm border border-blue-200 overflow-hidden flex flex-col hover:shadow-xl transition-all animate-in fade-in",children:[e.jsxs("div",{className:"p-5 bg-blue-50 border-b border-blue-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-blue-500",children:e.jsx(Y,{size:18})}),e.jsx("h3",{className:"font-black text-blue-800 text-xs uppercase tracking-widest italic",children:"Blauwdrukken toevoegen aan Bibliotheek"})]}),e.jsx("span",{className:"text-[10px] font-black bg-blue-600 text-white px-2.5 py-1 rounded-lg shadow-sm",children:Object.keys(n).length})]}),e.jsxs("div",{className:"p-5 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-blue-900",children:"Kies veld:"}),e.jsxs("select",{className:"border border-blue-200 rounded-lg px-2 py-1 text-xs font-bold",value:f,onChange:p=>z(p.target.value),children:[e.jsx("option",{value:"product_names",children:"Product Types"}),e.jsx("option",{value:"borings",children:"Boring Types"}),e.jsx("option",{value:"connections",children:"Mof Verbindingen"}),e.jsx("option",{value:"diameters",children:"Diameters (ID)"}),e.jsx("option",{value:"pns",children:"Drukklassen (PN)"}),e.jsx("option",{value:"codes",children:"Extra Codes"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.keys(n).length===0&&e.jsx("span",{className:"text-slate-400 text-xs",children:"Geen blauwdrukken gevonden."}),Object.entries(n).map(([p,s])=>e.jsxs("button",{onClick:()=>k(f,(s==null?void 0:s.naam)||p),className:"px-4 py-2 rounded-xl text-[11px] font-black flex items-center gap-2 shadow-sm border bg-blue-50 text-blue-800 border-blue-200 hover:bg-blue-100 transition-all uppercase",title:(s==null?void 0:s.omschrijving)||p,children:[(s==null?void 0:s.naam)||p," ",e.jsx("span",{className:"ml-1 text-blue-400",children:"+"})]},p))]})]})]}),e.jsxs("div",{className:"p-8 bg-slate-900 rounded-[40px] border border-white/5 flex items-start gap-6 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5",children:e.jsx(q,{size:80})}),e.jsx("div",{className:"p-3 bg-blue-600 rounded-2xl text-white shadow-lg shrink-0",children:e.jsx(q,{size:20})}),e.jsxs("div",{className:"text-left space-y-2 relative z-10",children:[e.jsx("h4",{className:"text-xs font-black uppercase text-blue-400 tracking-widest italic leading-none",children:"Instructies"}),e.jsxs("p",{className:"text-[11px] text-slate-400 font-bold uppercase leading-relaxed tracking-wider opacity-80",children:["Wijzigingen in de bibliotheek zijn direct merkbaar in de filters van de andere tabs. Vergeet niet bovenaan op ",e.jsx("strong",{children:'"Opslaan"'})," ","te klikken om de wijzigingen definitief te maken in de root database."]})]})]})]})},Ze=({blueprints:o,setBlueprints:m,libraryData:c,setHasUnsavedChanges:n})=>{const[i,j]=d.useState(null),[f,z]=d.useState({BORINGEN:!0}),[k,h]=d.useState(""),[N,p]=d.useState(!1),[s,x]=d.useState("fitting"),[b,w]=d.useState(""),R=d.useRef(null),[a,l]=d.useState({productType:"",connectionType:"",extraCode:"",boreType:"",fields:[]}),[y,L]=d.useState(""),E=d.useMemo(()=>(c==null?void 0:c.product_names)||[],[c]),O=d.useMemo(()=>(c==null?void 0:c.connections)||[],[c]),F=d.useMemo(()=>(c==null?void 0:c.extraCodes)||(c==null?void 0:c.codes)||[],[c]),W=d.useMemo(()=>(c==null?void 0:c.borings)||[],[c]),u=d.useMemo(()=>Object.keys(o||{}).sort(),[o]),S=d.useMemo(()=>{const t={};return Object.keys(o||{}).sort().forEach(C=>{if(k&&!C.toLowerCase().includes(k.toLowerCase()))return;let _="OVERIG";C.startsWith("BORE_")?_="BORINGEN":_=C.split("_")[0],t[_]||(t[_]=[]),t[_].push(C)}),t},[o,k]),g=t=>z(v=>({...v,[t]:!v[t]})),I=t=>{var v;if(j(t),t.startsWith("BORE_"))x("bore"),l({boreType:t.replace("BORE_",""),productType:"",connectionType:"",extraCode:"",fields:o[t].fields||[]});else{x("fitting");const C=t.split("_");l({productType:C[0],connectionType:C[1],extraCode:C.slice(2).join("_")||"",boreType:"",fields:o[t].fields||[]})}(v=R.current)==null||v.scrollTo({top:0,behavior:"smooth"})},B=()=>{var t;j(null),l({productType:"",connectionType:"",extraCode:"",boreType:"",fields:[]}),L(""),w(""),p(!0),setTimeout(()=>p(!1),1e3),(t=R.current)==null||t.scrollTo({top:0,behavior:"smooth"})},$=()=>{if(!b||!o[b])return;const t=o[b].fields||[];if(t.length===0){alert("Deze bron bevat geen velden.");return}l(v=>{const C=[...new Set([...v.fields,...t])];return{...v,fields:C}}),w("")},A=()=>{const t=y.trim().toUpperCase();t&&!a.fields.includes(t)&&(l({...a,fields:[...a.fields,t]}),L(""))},V=t=>{l({...a,fields:a.fields.filter(v=>v!==t)})},r=()=>{let t="";if(s==="bore"){if(!a.boreType)return alert("Selecteer een Boring Type.");t=`BORE_${a.boreType}`}else{if(!a.productType||!a.connectionType)return alert("Selecteer Product Type en Mof.");t=`${a.productType}_${a.connectionType}${a.extraCode&&a.extraCode!=="-"?"_"+a.extraCode:""}`}m({...o,[t]:{fields:a.fields}}),n&&n(!0),j(t)},T=t=>{if(window.confirm(`Blauwdruk '${t}' verwijderen?`)){const v={...o};delete v[t],m(v),n&&n(!0),i===t&&B()}};return e.jsxs("div",{className:"flex gap-6 h-[calc(100vh-220px)] animate-in fade-in duration-500 text-left",children:[e.jsxs("div",{className:"w-1/3 bg-white rounded-[40px] border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 space-y-4 shrink-0 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left text-left",children:[e.jsxs("h3",{className:"font-black text-slate-800 text-sm uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Y,{size:18,className:"text-purple-600"}),"Templates"]}),e.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase mt-1 italic",children:"Matrix Configuratie"})]}),e.jsx("button",{onClick:B,className:`p-3 rounded-2xl transition-all shadow-lg flex items-center justify-center ${i===null?"bg-emerald-500 text-white shadow-emerald-200 scale-110":"bg-purple-600 text-white shadow-purple-200 hover:scale-105"}`,children:e.jsx(H,{size:20,strokeWidth:3})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:16}),e.jsx("input",{className:"w-full pl-11 pr-4 py-3 bg-white border-2 border-slate-100 rounded-2xl text-xs font-bold outline-none focus:border-purple-400 transition-all shadow-inner",placeholder:"Zoek template...",value:k,onChange:t=>h(t.target.value)})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar space-y-3 bg-white",children:Object.entries(S).map(([t,v])=>e.jsxs("div",{className:`border rounded-[30px] overflow-hidden ${t==="BORINGEN"?"border-blue-100 bg-blue-50/20":"border-slate-100 bg-slate-50/30"}`,children:[e.jsxs("button",{onClick:()=>g(t),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("span",{className:"font-black text-slate-700 text-[10px] uppercase tracking-widest flex items-center gap-2",children:[t==="BORINGEN"?e.jsx(Z,{size:14,className:"text-blue-500"}):e.jsx(ie,{size:14,className:"text-slate-400"}),t]}),f[t]?e.jsx(Ce,{size:14,className:"text-slate-400"}):e.jsx(me,{size:14,className:"text-slate-400"})]}),(f[t]||k)&&e.jsx("div",{className:"bg-white p-2 space-y-1",children:v.map(C=>e.jsxs("div",{onClick:()=>I(C),className:`p-3 pl-4 rounded-xl cursor-pointer text-[10px] font-bold transition-all flex justify-between items-center group ${i===C?C.startsWith("BORE_")?"bg-blue-600 text-white shadow-md":"bg-purple-600 text-white shadow-md":"hover:bg-slate-50 text-slate-500"}`,children:[e.jsx("span",{className:"truncate font-mono",children:C.replace("BORE_","")}),e.jsx(ne,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity hover:text-red-400",onClick:_=>{_.stopPropagation(),T(C)}})]},C))})]},t))})]}),e.jsxs("div",{ref:R,className:"flex-1 bg-white rounded-[50px] border border-slate-200 shadow-sm p-12 overflow-y-auto custom-scrollbar relative text-left",children:[N&&e.jsxs("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 animate-bounce bg-emerald-500 text-white px-5 py-2.5 rounded-full text-[10px] font-black uppercase flex items-center gap-2 z-10 shadow-xl shadow-emerald-200",children:[e.jsx(ze,{size:14})," Designer Gereed"]}),e.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10 pb-10 border-b border-slate-100",children:[e.jsxs("div",{className:"text-left text-left",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl",children:[e.jsx("button",{onClick:()=>!i&&x("fitting"),disabled:!!i,className:`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all ${s==="fitting"?"bg-white text-purple-600 shadow-sm":"text-slate-400"}`,children:"Fitting"}),e.jsx("button",{onClick:()=>!i&&x("bore"),disabled:!!i,className:`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase transition-all ${s==="bore"?"bg-white text-blue-600 shadow-sm":"text-slate-400"}`,children:"Boring"})]})}),e.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tighter italic uppercase",children:i?i.replace("BORE_",""):`${s==="bore"?"Boring":"Fitting"} Designer`})]}),i&&e.jsx("button",{onClick:B,className:"p-4 bg-slate-50 text-slate-400 rounded-3xl hover:bg-emerald-50 hover:text-emerald-600 transition-all border border-transparent hover:border-emerald-100 shadow-sm active:scale-95",children:e.jsx(H,{size:28})})]}),s==="fitting"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 animate-in slide-in-from-left duration-300",children:[e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"1. Product Type"}),e.jsxs("select",{className:`w-full border-2 rounded-[25px] px-6 py-5 text-sm font-bold outline-none transition-all shadow-sm ${i?"bg-slate-50 border-slate-100 text-slate-400":"bg-white border-slate-200 focus:border-purple-500"}`,value:a.productType,onChange:t=>l({...a,productType:t.target.value}),disabled:!!i,children:[e.jsx("option",{value:"",children:"- Kies Type -"}),E.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"2. Connectie / Mof"}),e.jsxs("select",{className:`w-full border-2 rounded-[25px] px-6 py-5 text-sm font-bold outline-none transition-all shadow-sm ${i?"bg-slate-50 border-slate-100 text-slate-400":"bg-white border-slate-200 focus:border-purple-500"}`,value:a.connectionType,onChange:t=>l({...a,connectionType:t.target.value}),disabled:!!i,children:[e.jsx("option",{value:"",children:"- Kies Mof -"}),O.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"col-span-2 space-y-2 text-left",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"3. Extra Code (Optioneel)"}),e.jsxs("select",{className:`w-full border-2 rounded-[25px] px-6 py-5 text-sm font-bold outline-none transition-all shadow-sm ${i?"bg-slate-50 border-slate-100 text-slate-400":"bg-white border-slate-200 focus:border-purple-500"}`,value:a.extraCode,onChange:t=>l({...a,extraCode:t.target.value}),disabled:!!i,children:[e.jsx("option",{value:"-",children:"- Standaard (Geen code) -"}),F.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}):e.jsxs("div",{className:"mb-12 animate-in slide-in-from-right duration-300 space-y-2 text-left",children:[e.jsxs("label",{className:"block text-[10px] font-black text-blue-600 uppercase mb-2 ml-1 flex items-center gap-2 italic tracking-widest",children:[e.jsx(Z,{size:14})," Selecteer Boring Type"]}),e.jsxs("select",{className:`w-full border-2 rounded-[25px] px-7 py-6 text-base font-black outline-none transition-all shadow-md ${i?"bg-blue-50 border-blue-100 text-blue-700":"bg-white border-blue-200 focus:border-blue-500"}`,value:a.boreType,onChange:t=>l({...a,boreType:t.target.value}),disabled:!!i,children:[e.jsx("option",{value:"",children:"- Kies een boringstype -"}),W.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-12 bg-emerald-50/50 border-2 border-dashed border-emerald-100 rounded-[35px] p-8 animate-in fade-in duration-700 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2.5 bg-emerald-500 rounded-2xl text-white shadow-lg",children:e.jsx($e,{size:18})}),e.jsx("h4",{className:"text-[11px] font-black text-emerald-700 uppercase tracking-widest italic",children:"Snelstart: Kopieer Velden van bestaande template"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{className:"flex-1 bg-white border-2 border-emerald-100 rounded-2xl px-6 py-5 text-xs font-bold outline-none focus:border-emerald-400 shadow-sm",value:b,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"",children:"- Kies een bron template -"}),u.map(t=>e.jsx("option",{value:t,children:t.startsWith("BORE_")?"Boring: "+t.replace("BORE_",""):"Fitting: "+t},t))]}),e.jsxs("button",{onClick:$,disabled:!b,className:"bg-emerald-600 text-white px-10 rounded-2xl font-black text-[11px] uppercase tracking-widest flex items-center gap-3 hover:bg-emerald-700 disabled:opacity-30 transition-all shadow-xl active:scale-95",children:[e.jsx(xe,{size:16,fill:"currentColor"})," Kopieer"]})]})]}),e.jsxs("div",{className:`rounded-[40px] p-10 border mb-12 shadow-inner transition-colors text-left ${s==="bore"?"bg-blue-50/30 border-blue-100":"bg-slate-50 border-slate-100"}`,children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("h4",{className:`text-[11px] font-black uppercase tracking-widest flex items-center gap-2 italic ${s==="bore"?"text-blue-500":"text-slate-500"}`,children:[e.jsx(ye,{size:16})," Actieve Variabelen (",a.fields.length,")"]})}),e.jsxs("div",{className:"flex gap-4 mb-10",children:[e.jsx("input",{className:"flex-1 bg-white border-2 border-slate-200 rounded-[20px] px-6 py-5 text-sm font-bold focus:border-blue-500 outline-none transition-all placeholder:text-slate-300 shadow-sm",placeholder:s==="bore"?"Bijv. k, d, n, b...":"Bijv. TW, L, r1...",value:y,onChange:t=>L(t.target.value),onKeyDown:t=>t.key==="Enter"&&A()}),e.jsx("button",{onClick:A,disabled:!y,className:`px-10 rounded-2xl font-black transition-all disabled:opacity-20 shadow-xl text-white ${s==="bore"?"bg-blue-600 hover:bg-blue-700":"bg-slate-900 hover:bg-purple-600"}`,children:e.jsx(H,{size:28})})]}),e.jsx("div",{className:"flex flex-wrap gap-3 min-h-[160px] content-start",children:a.fields.length===0?e.jsx("div",{className:"w-full py-20 text-center text-slate-300 border-2 border-dashed border-slate-200 rounded-[30px] bg-white/50",children:e.jsx("p",{className:"text-[11px] font-black uppercase tracking-widest italic opacity-60",children:"Geen technische variabelen gekoppeld"})}):a.fields.map(t=>e.jsxs("span",{className:"bg-white border-2 border-slate-100 px-6 py-4 rounded-2xl text-[12px] font-black text-slate-700 flex items-center gap-5 shadow-sm hover:border-blue-200 transition-all animate-in zoom-in group",children:[t,e.jsx("button",{onClick:()=>V(t),className:"text-slate-200 group-hover:text-red-500 p-1 transition-colors",children:e.jsx(se,{size:16})})]},t))})]}),e.jsxs("div",{className:"flex flex-col items-center pt-10 border-t border-slate-100",children:[e.jsxs("button",{onClick:r,disabled:s==="fitting"&&(!a.productType||!a.connectionType)||s==="bore"&&!a.boreType,className:`w-full max-w-sm py-7 rounded-[35px] font-black text-xs uppercase tracking-[0.2em] shadow-2xl transition-all flex items-center justify-center gap-4 disabled:opacity-30 active:scale-95 text-white ${s==="bore"?"bg-blue-600 hover:bg-blue-700 shadow-blue-200":"bg-slate-900 hover:bg-purple-600 shadow-purple-200"}`,children:[e.jsx(ae,{size:24})," Bevestig"," ",s==="bore"?"Boring":"Blauwdruk"]}),e.jsxs("div",{className:"mt-10 p-8 bg-slate-50 rounded-[35px] border border-slate-100 flex items-start gap-5 max-w-xl text-left",children:[e.jsx(re,{size:24,className:"text-slate-400 shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-500 uppercase leading-relaxed tracking-wider opacity-80",children:["Zodra je een template bevestigt, verschijnen de variabelen direct in de ",e.jsx("strong",{children:"Maatvoering"})," tab voor alle ID's binnen die configuratie."]})]})]})]})]})]})},Je=({libraryData:o,blueprints:m,productRange:c})=>{var $,A,V;const[n,i]=d.useState("bell"),[j,f]=d.useState("cb"),[z,k]=d.useState([]),[h,N]=d.useState(null),[p,s]=d.useState(!1),[x,b]=d.useState(""),[w,R]=d.useState(!1),[a,l]=d.useState({pn:"",id:"",extraCode:"",type:"",drilling:""}),y=[{id:"bell",label:"Bell (Mof)",icon:e.jsx(Me,{size:18})},{id:"fitting",label:"Fitting",icon:e.jsx(ue,{size:18})},{id:"bore",label:"Bore",icon:e.jsx(Z,{size:18})}],L={B1:"B1",B2:"B2",BA:"BA",A:"A",TW:"TW",TWcb:"TWcb",TWtb:"TWtb",Twtb:"TWtb",r1:"r1",BD:"BD",W:"W",L:"L",Lo:"Lo",Z:"Z",R:"R",alpha:"alpha",Weight:"Weight",k:"k",d:"d",n:"n",b:"b"},E=["TW","L","Lo","R","Weight"],O=["k","d","n","b"],F=()=>{var r;return n==="bore"?"BORE_DIMENSIONS":n==="bell"?j==="cb"?"CB_DIMENSIONS":"TB_DIMENSIONS":n==="fitting"?(r=a.type)!=null&&r.toLowerCase().endsWith("_socket")?"SOCKET_SPECS":"FITTING_SPECS":null};d.useEffect(()=>{const r=F();if(!r)return;s(!0);const T=je(M,...P[r]),t=he(Ne(T),v=>{const C=v.docs.map(_=>({id:_.id,..._.data()}));k(C.sort((_,K)=>_.id.localeCompare(K.id,void 0,{numeric:!0}))),s(!1)},v=>{console.error("Fout bij laden maatvoering:",v),s(!1)});return()=>t()},[n,j,a.type]);const W=()=>{const r=(o==null?void 0:o.pns)||[];if(!c)return r;const T=j.toUpperCase(),t=c[T]||c[`${T}/${T}`];return t?Object.keys(t).map(Number).sort((v,C)=>v-C):r},u=()=>{const r=(o==null?void 0:o.diameters)||[];if(n==="bore")return(o==null?void 0:o.diameters)||[];if(!a.pn||!c)return[];const T=j.toUpperCase(),t=String(a.pn),v=c[T]||c[`${T}/${T}`];if(v&&v[t]){const C=v[t];if(n==="fitting"&&a.type)return(C[a.type]||C.Algemeen||[]).sort((_,K)=>_-K);{const _=new Set;return Object.values(C).forEach(K=>K.forEach(U=>_.add(Number(U)))),Array.from(_).sort((K,U)=>K-U)}}return r},S=()=>{var K;if(!F())return;let T="",t={pressure:Number(a.pn),diameter:Number(a.id)};if(n==="bore"){if(!a.drilling||!a.id)return alert("Selecteer Boring en ID.");T=`${a.drilling.replace(/\s+/g,"_")}_ID${a.id}`.toUpperCase(),t={drilling:a.drilling,diameter:Number(a.id)}}else{if(!a.pn||!a.id)return alert("Selecteer PN en ID.");const U=j.toUpperCase();T=`${n==="fitting"?`${a.type.toUpperCase()}_`:""}${U}_PN${a.pn}_ID${a.id}${a.extraCode?"_"+a.extraCode.toUpperCase():""}`}const v=n==="bore"?`BORE_${a.drilling}`:n==="fitting"?`${a.type}_${j.toUpperCase()}`:`Algemeen_${j.toUpperCase()}`,C=((K=m==null?void 0:m[v])==null?void 0:K.fields)||(n==="bore"?O:E),_={id:T,...t};C.forEach(U=>_[U]=""),N(_)},g=async()=>{if(h){R(!0);try{const r=F(),T=G(M,...P[r],h.id);await X(T,{...h,lastUpdated:ee()},{merge:!0}),N(null)}catch(r){alert("Fout bij opslaan: "+r.message)}finally{R(!1)}}},I=async r=>{if(window.confirm(`Item ${r} definitief verwijderen?`))try{const T=F();await ve(G(M,...P[T],r))}catch(T){alert(T.message)}},B=r=>Object.keys(r).filter(t=>!["id","pressure","diameter","drilling","lastUpdated"].includes(t)).sort((t,v)=>{const C=E.indexOf(t.replace("cb","").replace("tb","")),_=E.indexOf(v.replace("cb","").replace("tb",""));return C-_});return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 w-full max-w-7xl mx-auto h-[calc(100vh-140px)] flex flex-col text-left",children:[e.jsxs("div",{className:"bg-white p-4 rounded-[35px] shadow-sm border border-slate-200 flex justify-between items-center shrink-0",children:[e.jsx("div",{className:"flex gap-2",children:y.map(r=>e.jsxs("button",{onClick:()=>{i(r.id),N(null)},className:`flex items-center gap-3 px-6 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all ${n===r.id?"bg-slate-900 text-white shadow-xl":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[r.icon," ",r.label]},r.id))}),(n==="bell"||n==="fitting")&&e.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl",children:[e.jsx("button",{onClick:()=>f("cb"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${j==="cb"?"bg-white text-blue-600 shadow-sm":"text-slate-400"}`,children:"CB (Lijm)"}),e.jsx("button",{onClick:()=>f("tb"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${j==="tb"?"bg-white text-blue-600 shadow-sm":"text-slate-400"}`,children:"TB (Draad)"})]})]}),e.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"bg-white p-6 rounded-[35px] border border-slate-200 shadow-sm space-y-4 shrink-0",children:[e.jsxs("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 italic",children:[e.jsx(H,{size:14,className:"text-blue-500"})," Nieuw record configureren"]}),e.jsxs("div",{className:"space-y-3",children:[n==="fitting"&&e.jsxs("select",{className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-xs font-bold",value:a.type,onChange:r=>l({...a,type:r.target.value}),children:[e.jsx("option",{value:"",children:"- Selecteer Product -"}),($=o==null?void 0:o.product_names)==null?void 0:$.map(r=>e.jsx("option",{value:r,children:r},r))]}),n==="bore"&&e.jsxs("select",{className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-xs font-bold",value:a.drilling,onChange:r=>l({...a,drilling:r.target.value}),children:[e.jsx("option",{value:"",children:"- Selecteer Boring -"}),(A=o==null?void 0:o.borings)==null?void 0:A.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{className:"bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-xs font-bold",value:a.pn,onChange:r=>l({...a,pn:r.target.value,id:""}),children:[e.jsx("option",{value:"",children:"PN"}),W().map(r=>e.jsxs("option",{value:r,children:["PN",r]},r))]}),e.jsxs("select",{className:"bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-xs font-bold",value:a.id,onChange:r=>l({...a,id:r.target.value}),children:[e.jsx("option",{value:"",children:"ID (mm)"}),u().map(r=>e.jsxs("option",{value:r,children:["ID",r]},r))]})]})]}),e.jsx("button",{onClick:S,disabled:!a.id,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-blue-600 transition-all shadow-lg disabled:opacity-30",children:"Configureer Maatvoering"})]}),e.jsxs("div",{className:"bg-white rounded-[35px] border border-slate-200 flex-1 flex flex-col overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 relative text-left",children:[e.jsx(pe,{className:"absolute left-7 top-1/2 -translate-y-1/2 text-slate-300",size:16}),e.jsx("input",{className:"w-full pl-12 pr-4 py-3 bg-white border-2 border-slate-100 rounded-2xl text-xs font-bold outline-none focus:border-blue-500",placeholder:"Zoek op ID...",value:x,onChange:r=>b(r.target.value)})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:p?e.jsx("div",{className:"p-10 text-center animate-pulse",children:e.jsx(J,{className:"animate-spin inline text-blue-500"})}):z.filter(r=>r.id.toLowerCase().includes(x.toLowerCase())).map(r=>e.jsxs("div",{onClick:()=>N(r),className:`p-4 rounded-2xl cursor-pointer transition-all flex justify-between items-center group ${(h==null?void 0:h.id)===r.id?"bg-blue-600 text-white shadow-lg":"hover:bg-slate-50 text-slate-600"}`,children:[e.jsx("span",{className:"text-[11px] font-mono font-bold truncate",children:r.id}),e.jsx(me,{size:14,className:(h==null?void 0:h.id)===r.id?"text-white":"opacity-0 group-hover:opacity-100"})]},r.id))})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:h?e.jsxs("div",{className:"bg-white p-10 rounded-[50px] shadow-2xl border border-slate-100 relative animate-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-10 pb-8 border-b border-slate-100",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-[9px] font-black uppercase italic tracking-widest border border-blue-100",children:"Geselecteerde Maatvoering"}),e.jsx("button",{onClick:()=>I(h.id),className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:e.jsx(ne,{size:18})})]}),e.jsx("h3",{className:"text-4xl font-black text-slate-900 italic tracking-tighter uppercase",children:h.id})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(null),className:"p-4 bg-slate-50 text-slate-400 rounded-2xl hover:bg-slate-100 transition-all",children:e.jsx(se,{size:20})}),e.jsxs("button",{onClick:g,disabled:w,className:"bg-blue-600 text-white px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-blue-700 shadow-xl flex items-center gap-3 active:scale-95 disabled:opacity-50",children:[w?e.jsx(de,{className:"animate-spin",size:16}):e.jsx(ae,{size:16})," ","Opslaan naar Root"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B(h).map(r=>e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:L[r]||r}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full bg-slate-50 border-2 border-slate-100 rounded-2xl px-5 py-4 text-sm font-black focus:bg-white focus:border-blue-500 outline-none transition-all shadow-inner",value:h[r]||"",onChange:T=>N({...h,[r]:T.target.value})}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-slate-300 pointer-events-none uppercase italic",children:r.toLowerCase().includes("weight")?"kg":r==="n"?"st":"mm"})]})]},r))}),e.jsxs("div",{className:"mt-12 p-8 bg-slate-900 rounded-[35px] text-white/50 text-[10px] font-black uppercase tracking-[0.2em] flex items-center gap-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(D,{size:100})}),e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl text-white shadow-lg",children:e.jsx(q,{size:20})}),e.jsxs("div",{className:"text-left flex-1 relative z-10 leading-relaxed",children:["Alle wijzigingen worden direct weggeschreven naar de beveiligde productieomgeving onder"," ",e.jsxs("span",{className:"text-blue-400 italic",children:["/",(V=P[F()])==null?void 0:V.join("/")]}),"."]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 border-4 border-dashed border-slate-100 rounded-[60px] bg-white/50 p-20 opacity-50 text-center",children:[e.jsx(Be,{size:100,className:"mb-6 opacity-10"}),e.jsx("p",{className:"font-black text-xl uppercase tracking-widest text-slate-400 max-w-sm italic",children:"Selecteer een item uit de lijst of configureer een nieuwe maatvoering links."})]})})]})]})},Qe=({blueprints:o={}})=>{const m=Object.entries(o).sort(([c],[n])=>c.startsWith("BORE_")&&!n.startsWith("BORE_")?-1:!c.startsWith("BORE_")&&n.startsWith("BORE_")?1:c.localeCompare(n));return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 text-left",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-200 flex flex-col md:flex-row items-center justify-between gap-6 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(ie,{size:120})}),e.jsxs("div",{className:"flex items-center gap-6 relative z-10",children:[e.jsx("div",{className:"p-4 bg-orange-500 text-white rounded-3xl shadow-lg shadow-orange-200",children:e.jsx(Te,{size:32})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-900 uppercase italic tracking-tighter leading-none",children:["Technical ",e.jsx("span",{className:"text-orange-500",children:"Inventory"})]}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2 flex items-center gap-2",children:[e.jsx(fe,{size:12,className:"text-emerald-500"})," Overzicht van alle geactiveerde Blueprints"]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-6 py-3 rounded-2xl border border-slate-100 text-right shrink-0",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase block mb-1",children:"Totaal Templates"}),e.jsxs("span",{className:"text-xl font-black text-slate-800 italic",children:[m.length," Records"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.length>0?m.map(([c,n])=>{var j;const i=c.startsWith("BORE_");return e.jsxs("div",{className:"bg-white rounded-[35px] border-2 border-slate-100 shadow-sm hover:shadow-xl hover:border-blue-400 transition-all group overflow-hidden flex flex-col",children:[e.jsx("div",{className:`p-6 flex justify-between items-start border-b ${i?"bg-blue-50/50 border-blue-100":"bg-slate-50/50 border-slate-100"}`,children:e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i?e.jsx(Z,{size:14,className:"text-blue-600"}):e.jsx(Y,{size:14,className:"text-purple-600"}),e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] italic",children:i?"Boring Template":"Fitting Template"})]}),e.jsx("h4",{className:"font-black text-slate-900 text-lg tracking-tighter uppercase italic leading-none",children:c.replace("BORE_","")})]})}),e.jsxs("div",{className:"p-6 flex-1 space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-3 border border-slate-100",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase mb-2 ml-1",children:"Database Key"}),e.jsx("code",{className:"text-[10px] font-mono font-bold text-blue-600 break-all",children:c})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[e.jsx(be,{size:10})," Actieve Variabelen (",((j=n.fields)==null?void 0:j.length)||0,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.fields&&n.fields.length>0?n.fields.map(f=>e.jsx("span",{className:"px-2.5 py-1.5 bg-white text-slate-700 text-[10px] font-black rounded-lg border border-slate-200 shadow-sm group-hover:border-blue-200 transition-colors uppercase italic",children:f},f)):e.jsx("span",{className:"text-[10px] text-slate-300 italic py-2 uppercase",children:"Geen velden gekoppeld"})})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-slate-50/30 border-t border-slate-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 opacity-40",children:[e.jsx(D,{size:10}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:"Sync Mode: Root"})]}),e.jsx(me,{size:14,className:"text-slate-200 group-hover:text-blue-500 group-hover:translate-x-1 transition-all"})]})]},c)}):e.jsxs("div",{className:"col-span-full py-24 text-center bg-white rounded-[50px] border-2 border-dashed border-slate-200 opacity-50 flex flex-col items-center",children:[e.jsx(D,{size:64,className:"text-slate-300 mb-4"}),e.jsx("p",{className:"font-black uppercase tracking-[0.3em] text-xs text-slate-400",children:"Geen technische specificaties gevonden in de root"})]})}),e.jsxs("div",{className:"p-8 bg-slate-900 rounded-[40px] border border-white/5 shadow-2xl relative overflow-hidden text-white flex items-start gap-6",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(D,{size:100})}),e.jsx("div",{className:"p-3 bg-blue-600 rounded-2xl shadow-lg shrink-0",children:e.jsx(D,{size:20})}),e.jsxs("div",{className:"text-left space-y-2 relative z-10",children:[e.jsx("h4",{className:"text-xs font-black uppercase text-blue-400 tracking-widest italic leading-none",children:"Status Rapportage"}),e.jsxs("p",{className:"text-[11px] text-slate-400 font-bold uppercase leading-relaxed tracking-wider opacity-80 max-w-3xl",children:["Deze tabel synchroniseert real-time met"," ",e.jsx("strong",{children:"/future-factory/settings/blueprint_configs/main"}),". Blauwdrukken die hier verschijnen worden automatisch gebruikt door de ",e.jsx("strong",{children:"Maatvoering"})," module om invoervelden te genereren."]})]})]})]})},Ye=()=>{var W;const[o,m]=d.useState(!1),[c,n]=d.useState(null),[i,j]=d.useState("FITTING_SPECS"),[f,z]=d.useState([]),[k,h]=d.useState(""),[N,p]=d.useState([]),[s,x]=d.useState(!1),[b,w]=d.useState(!1),R=[{id:"FITTING_SPECS",label:"Fitting Afmetingen (Basis - CB)"},{id:"SOCKET_SPECS",label:"Socket Afmetingen (*_Socket - CB)"},{id:"CB_DIMENSIONS",label:"Mof Afmetingen (CB)"},{id:"TB_DIMENSIONS",label:"Mof Afmetingen (TB)"},{id:"BORE_DIMENSIONS",label:"Boring Afmetingen (Bore)"}],a={FITTING_SPECS:["id","TW","L","Lo","R","Weight","articleCode"],SOCKET_SPECS:["id","TWcb","BD","W"],CB_DIMENSIONS:["id","B1","B2","BA","A"],TB_DIMENSIONS:["id","B1","B2","BA","A","TWtb","BD","W"],BORE_DIMENSIONS:["id","k","d","n","b"]};d.useEffect(()=>{if(window.XLSX){w(!0);return}const u=document.createElement("script");u.src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js",u.async=!0,u.onload=()=>w(!0),document.head.appendChild(u)},[]);const l=(u="excel")=>{const S=a[i],g=`template_${i.toLowerCase()}`;if(u==="excel"&&window.XLSX){const I=window.XLSX.utils.aoa_to_sheet([S]),B=window.XLSX.utils.book_new();window.XLSX.utils.book_append_sheet(B,I,"Template"),window.XLSX.writeFile(B,`${g}.xlsx`)}else{const I="data:text/csv;charset=utf-8,"+S.join(","),B=encodeURI(I),$=document.createElement("a");$.setAttribute("href",B),$.setAttribute("download",`${g}.csv`),document.body.appendChild($),$.click(),document.body.removeChild($)}},y=u=>{x(!1),p([]);const S=u.filter(g=>Object.keys(g).filter(B=>B.trim()!=="").length>0);z(S)},L=u=>{const S=u.target.files[0];if(!S||!b)return;const g=new FileReader;g.onload=I=>{const B=new Uint8Array(I.target.result),$=window.XLSX.read(B,{type:"array"}),A=$.Sheets[$.SheetNames[0]],V=window.XLSX.utils.sheet_to_json(A);y(V)},g.readAsArrayBuffer(S)},E=u=>{const S=u.target.value;if(h(S),!S.trim())return;const g=S.split(`
`).filter(A=>A.trim()),B=g[0].split("	").map(A=>A.trim()).filter(A=>A!==""),$=g.slice(1).map(A=>{const V=A.split("	"),r={};return B.forEach((T,t)=>{var _;if(!T)return;let v=((_=V[t])==null?void 0:_.trim())||"";const C=T.toLowerCase();v!==""&&!isNaN(v)&&!["id","articlecode","drawing"].includes(C)&&(v=Number(v)),r[T]=v}),r});y($)},O=()=>{const u=[];f.length===0&&u.push("Geen data gevonden om te controleren."),f.forEach((g,I)=>{g.id||u.push(`Rij ${I+1}: Het veld 'id' is verplicht.`),Object.keys(g).forEach(B=>{(B===""||B==="undefined")&&u.push(`Rij ${I+1}: Bevat een kolom zonder naam. Verwijder lege kolommen uit Excel.`)})});const S=[...new Set(u)];p(S),S.length===0&&f.length>0?(x(!0),n({type:"success",msg:"Data validatie succesvol. Klaar voor import."})):(x(!1),n({type:"error",msg:"Controle mislukt. Corrigeer de fouten."}))},F=async()=>{if(!s||o)return;m(!0);const u=Oe(M);let S=0;try{const g=P[i];f.forEach(I=>{if(!I.id)return;const B={};Object.entries(I).forEach(([A,V])=>{A.trim()!==""&&A!=="undefined"&&(B[A]=V)});const $=G(M,...g,String(I.id).trim());u.set($,{...B,lastUpdated:ee(),updatedBy:"Bulk Hub V3.0"},{merge:!0}),S++}),await u.commit(),n({type:"success",msg:`Import voltooid: ${S} items naar root.`}),z([]),h(""),x(!1)}catch(g){console.error("Batch Error:",g),n({type:"error",msg:"Import error: "+g.message})}finally{m(!1)}};return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 text-left pb-20",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white p-8 rounded-[40px] border border-slate-200 shadow-sm space-y-6 flex flex-col text-left",children:[e.jsxs("h3",{className:"text-lg font-black uppercase italic text-slate-800 flex items-center gap-3",children:[e.jsx(D,{size:20,className:"text-blue-600"})," 1. Categorie"]}),e.jsx("div",{className:"space-y-2 flex-1",children:R.map(u=>e.jsxs("button",{onClick:()=>{j(u.id),z([]),x(!1),n(null)},className:`w-full p-4 rounded-2xl border-2 text-left transition-all flex items-center justify-between ${i===u.id?"border-blue-600 bg-blue-50/50 text-blue-900 shadow-md":"border-slate-100 bg-slate-50 text-slate-400 hover:border-slate-200"}`,children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:u.label}),i===u.id&&e.jsx(oe,{size:14})]},u.id))}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Sjablonen:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>l("excel"),className:"py-3 bg-emerald-50 text-emerald-700 rounded-xl text-[9px] font-black uppercase flex items-center justify-center gap-2 hover:bg-emerald-100 border border-emerald-200 transition-all",children:[e.jsx(ge,{size:14})," Excel"]}),e.jsxs("button",{onClick:()=>l("csv"),className:"py-3 bg-slate-100 text-slate-600 rounded-xl text-[9px] font-black uppercase flex items-center justify-center gap-2 hover:bg-slate-200 border border-slate-200 transition-all",children:[e.jsx(ie,{size:14})," CSV"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 p-8 rounded-[40px] text-white shadow-2xl space-y-6 relative overflow-hidden flex flex-col justify-between",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(ge,{size:150})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("h3",{className:"text-xl font-black uppercase italic flex items-center gap-3 text-left",children:[e.jsx(We,{className:"text-emerald-400"})," 2. Data Hub"]}),e.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-mono text-emerald-400 bg-white/5 px-3 py-1.5 rounded-lg border border-white/10",children:[e.jsx(Ee,{size:12})," Target: /",(W=P[i])==null?void 0:W.join("/")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 relative z-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"A. Upload XLSX / CSV"}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-slate-700 rounded-[35px] hover:border-emerald-500 transition-all cursor-pointer bg-white/5 hover:bg-white/10 group",children:[e.jsx(Se,{className:"w-10 h-10 mb-2 text-slate-500 group-hover:text-emerald-400 transition-all"}),e.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase italic text-center",children:"Bestand Sleep of Klik"}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx, .xls, .csv",onChange:L})]})]}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest text-left",children:"B. Plakken uit Excel"}),e.jsx("textarea",{className:"w-full h-40 bg-white/5 border-2 border-slate-700 rounded-[35px] p-5 text-[10px] font-mono outline-none focus:border-emerald-500 focus:bg-white/10 transition-all placeholder:text-slate-600 shadow-inner",placeholder:"Kopieer cellen in Excel en plak hier...",value:k,onChange:E})]})]}),f.length>0&&e.jsxs("div",{className:"flex gap-3 pt-6 relative z-10 animate-in slide-in-from-bottom-2",children:[e.jsxs("button",{onClick:O,className:`flex-1 py-5 rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl transition-all flex items-center justify-center gap-3 ${s?"bg-emerald-500 text-white":"bg-blue-600 text-white hover:bg-blue-500"}`,children:[s?e.jsx(Ve,{size:20}):e.jsx(xe,{size:20})," ","Validatie Starten"]}),e.jsxs("button",{onClick:F,disabled:!s||o,className:"flex-1 py-5 bg-white text-slate-900 rounded-2xl font-black uppercase text-[10px] tracking-[0.2em] shadow-xl hover:bg-emerald-400 disabled:opacity-30 transition-all flex items-center justify-center gap-3 active:scale-95",children:[o?e.jsx(J,{size:20,className:"animate-spin"}):e.jsx(ae,{size:20})," ","Start Root Import"]})]})]})]}),N.length>0&&e.jsxs("div",{className:"bg-rose-50 border-2 border-rose-100 p-8 rounded-[40px] space-y-3 animate-in zoom-in shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 text-rose-600 mb-4 font-black uppercase text-sm",children:[e.jsx(re,{size:24})," Validatie Fouten Gevonden"]}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs font-bold text-rose-500 list-inside list-disc",children:N.map((u,S)=>e.jsx("li",{children:u},S))})]}),c&&e.jsxs("div",{className:`p-6 rounded-[30px] flex items-center gap-4 border-2 shadow-lg animate-in slide-in-from-top-4 ${c.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":"bg-blue-50 border-blue-100 text-blue-700"}`,children:[c.type==="success"?e.jsx(oe,{size:28}):e.jsx(q,{size:28}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:c.msg}),e.jsx("button",{onClick:()=>n(null),className:"ml-auto opacity-30 hover:opacity-100",children:e.jsx(se,{size:24})})]}),f.length>0&&e.jsxs("div",{className:"bg-white rounded-[45px] border border-slate-200 shadow-sm overflow-hidden animate-in fade-in duration-700 text-left",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-left",children:[e.jsx(Le,{size:20,className:"text-slate-400"}),e.jsxs("h4",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest italic",children:["Data Preview (",f.length," records)"]})]}),e.jsx("button",{onClick:()=>{z([]),h(""),x(!1)},className:"text-[10px] font-black text-rose-500 uppercase hover:underline",children:"Wissen"})]}),e.jsx("div",{className:"overflow-x-auto max-h-[400px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-white text-[10px] font-black text-slate-400 uppercase tracking-widest border-b sticky top-0 z-10 shadow-sm",children:e.jsx("tr",{children:Object.keys(f[0]).filter(u=>u.trim()!=="").map(u=>e.jsx("th",{className:"px-8 py-5",children:u},u))})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:f.map((u,S)=>e.jsx("tr",{className:"hover:bg-blue-50/30 transition-colors",children:Object.entries(u).filter(([g])=>g.trim()!=="").map(([g,I],B)=>e.jsx("td",{className:"px-8 py-4 text-[11px] font-bold text-slate-600 font-mono italic",children:String(I)},B))},S))})]})})]}),e.jsxs("div",{className:"p-10 bg-blue-50 rounded-[50px] border-2 border-blue-100 flex items-start gap-6 shadow-inner text-left",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-2xl text-white shadow-lg",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-black uppercase text-blue-900 tracking-widest italic text-left",children:"Bulk Hub Root Protocols:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-[10px] font-bold text-blue-700/70 uppercase leading-relaxed text-left",children:[e.jsx("p",{children:"1. Kolom 'id' is VERPLICHT voor elk record (bv: ID350_PN8)."}),e.jsx("p",{children:"2. Het systeem negeert automatisch lege rijen en kolommen."}),e.jsx("p",{children:"3. Validatie checkt op unieke ID's en Firestore compatibiliteit."}),e.jsx("p",{children:"4. Voor mof-maten (CB/TB) gebruik: B1, B2, BA, A, etc."})]})]})]})]})},et=()=>{const[o,m]=d.useState({ranges:[]}),[c,n]=d.useState(!0),[i,j]=d.useState(!1),[f,z]=d.useState(null);d.useEffect(()=>{const s=G(M,...P.MATRIX_CONFIG),x=he(s,b=>{if(b.exists()){const w=b.data();m({...w,ranges:Array.isArray(w.ranges)?w.ranges:[]})}n(!1)},b=>{console.error("Fout bij laden matrix config:",b),n(!1)});return()=>x()},[]);const k=async()=>{j(!0),z(null);try{const s=G(M,...P.MATRIX_CONFIG);await X(s,{...o,lastUpdated:ee(),type:"MATRIX_RANGES_CONFIG",storagePath:P.MATRIX_CONFIG.join("/")},{merge:!0}),z({type:"success",msg:"Matrix succesvol gepubliceerd in de root!"}),setTimeout(()=>z(null),3e3)}catch(s){console.error("Save error:",s),z({type:"error",msg:`Opslaan mislukt: ${s.message}`})}finally{j(!1)}},h=()=>{const s={id:Date.now(),min:0,max:0,wallThickness:0};m(x=>({...x,ranges:[...x.ranges||[],s]}))},N=s=>{m(x=>({...x,ranges:x.ranges.filter((b,w)=>w!==s)}))},p=(s,x,b)=>{const w=[...o.ranges];w[s][x]=b,m({...o,ranges:w})};return c?e.jsxs("div",{className:"p-20 text-center flex flex-col items-center gap-4",children:[e.jsx(J,{className:"animate-spin text-blue-500",size:40}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 italic",children:"Matrix gegevens synchroniseren..."})]}):e.jsx("div",{className:"h-full overflow-y-auto p-8 bg-slate-50 text-left custom-scrollbar animate-in fade-in",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[40px] border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 uppercase italic leading-none",children:["Matrix ",e.jsx("span",{className:"text-blue-600",children:"Bereiken"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(D,{size:12,className:"text-blue-500"}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Actief Pad:"}),e.jsxs("code",{className:"text-[9px] font-mono text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded border border-emerald-100 italic",children:["/",P.MATRIX_CONFIG.join("/")]})]})]}),e.jsxs("button",{onClick:k,disabled:i,className:"px-10 py-4 bg-slate-900 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 transition-all shadow-xl disabled:opacity-50 flex items-center gap-3 active:scale-95",children:[i?e.jsx(J,{className:"animate-spin",size:16}):e.jsx(ae,{size:16})," ","Bereiken Publiceren"]})]}),f&&e.jsxs("div",{className:`p-5 rounded-3xl border-2 flex items-center gap-4 animate-in slide-in-from-top-2 ${f.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700 shadow-emerald-100 shadow-md":"bg-rose-50 border-rose-100 text-rose-700 shadow-rose-100 shadow-md"}`,children:[f.type==="success"?e.jsx(oe,{size:20}):e.jsx(re,{size:20}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:f.msg})]}),e.jsxs("div",{className:"bg-white rounded-[45px] border border-slate-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest italic text-left",children:"Wanddikte Calculatie Tabel (mm)"})]}),e.jsx("button",{onClick:h,className:"p-2.5 bg-white rounded-xl text-blue-600 border border-slate-200 hover:bg-blue-50 transition-all shadow-sm active:scale-90",children:e.jsx(H,{size:18})})]}),e.jsx("div",{className:"p-8 space-y-4",children:o.ranges.length===0?e.jsxs("div",{className:"py-12 text-center opacity-30 italic",children:[e.jsx(D,{size:32,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Geen bereiken geconfigureerd"})]}):o.ranges.map((s,x)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 items-center bg-slate-50 p-6 rounded-[25px] border border-slate-100 group hover:border-blue-200 transition-all relative overflow-hidden",children:[e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-tighter ml-1",children:"Minimale  (mm)"}),e.jsx("input",{type:"number",className:"w-full bg-white border-2 border-slate-100 rounded-xl p-3 font-mono text-sm font-bold outline-none focus:border-blue-500 transition-all",value:s.min,onChange:b=>p(x,"min",b.target.value)})]}),e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-tighter ml-1",children:"Maximale  (mm)"}),e.jsx("input",{type:"number",className:"w-full bg-white border-2 border-slate-100 rounded-xl p-3 font-mono text-sm font-bold outline-none focus:border-blue-500 transition-all",value:s.max,onChange:b=>p(x,"max",b.target.value)})]}),e.jsxs("div",{className:"space-y-1.5 text-left relative",children:[e.jsx("label",{className:"text-[8px] font-black text-blue-500 uppercase tracking-tighter ml-1",children:"Wanddikte (mm)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",step:"0.1",className:"w-full bg-white border-2 border-blue-100 rounded-xl p-3 font-mono text-sm font-black text-blue-600 outline-none focus:border-blue-500 transition-all shadow-sm",value:s.wallThickness,onChange:b=>p(x,"wallThickness",b.target.value)}),e.jsx("button",{onClick:()=>N(x),className:"p-3 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"Verwijder bereik",children:e.jsx(ne,{size:18})})]})]})]},s.id||x))})]}),e.jsxs("div",{className:"bg-slate-900 p-8 rounded-[45px] text-white/50 text-[9px] font-black uppercase tracking-[0.2em] flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(D,{size:100})}),e.jsx("div",{className:"p-4 bg-blue-600 rounded-2xl shadow-lg text-white",children:e.jsx(ce,{size:20})}),e.jsxs("div",{className:"text-left flex-1 relative z-10",children:[e.jsx("p",{className:"text-white text-xs mb-1 italic tracking-tight",children:"Root Protection Protocol Active"}),e.jsx("p",{className:"leading-relaxed",children:"Deze instellingen worden gebruikt door de calculatoren om automatisch de juiste wanddikte te bepalen op basis van de geselecteerde productdiameter. Alle wijzigingen zijn direct live voor het hele systeem."})]})]})]})})},tt=()=>{const[o,m]=d.useState([]),[c,n]=d.useState(!0),[i,j]=d.useState(!1),[f,z]=d.useState(null),[k,h]=d.useState({}),[N,p]=d.useState(""),[s,x]=d.useState({dn:"100",pn:"10",pcd:"",holes:"8",holeSize:"18",thread:"M16"});d.useEffect(()=>{const l=je(M,...P.BORE_DIMENSIONS);Ne(l,Re("dn","asc"));const y=he(l,L=>{const E=L.docs.map(O=>({id:O.id,...O.data()}));m(E.sort((O,F)=>parseInt(O.dn)-parseInt(F.dn))),n(!1)},L=>{console.error("Fout bij laden boorpatronen:",L),n(!1)});return()=>y()},[]);const b=async l=>{var L;l.preventDefault(),j(!0);const y=`ID${s.dn}_PN${s.pn}`;try{const E=G(M,...P.BORE_DIMENSIONS,y);await X(E,{...s,id:y,lastUpdated:ee(),updatedBy:((L=Ie.currentUser)==null?void 0:L.email)||"Admin"},{merge:!0}),x({...s,pcd:"",holes:"8",holeSize:"18",thread:"M16"})}catch(E){alert("Opslaan mislukt: "+E.message)}finally{j(!1)}},w=async l=>{try{const y=G(M,...P.BORE_DIMENSIONS,l);await Ae(y,{...k,lastUpdated:ee()}),z(null)}catch(y){alert(y.message)}},R=async l=>{if(window.confirm(`Boorpatroon ${l} definitief verwijderen uit de root?`))try{await ve(G(M,...P.BORE_DIMENSIONS,l))}catch(y){alert(y.message)}},a=o.filter(l=>String(l.dn).includes(N)||String(l.pn).includes(N));return c?e.jsxs("div",{className:"p-20 text-center flex flex-col items-center gap-4",children:[e.jsx(J,{className:"animate-spin text-blue-500",size:40}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 italic",children:"Boorpatronen synchroniseren..."})]}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6 animate-in fade-in duration-500 text-left pb-32",children:[e.jsxs("header",{className:"mb-10 flex flex-col md:flex-row justify-between items-center gap-6 bg-white p-8 rounded-[40px] border border-slate-200 shadow-sm overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(Z,{size:120})}),e.jsxs("div",{className:"text-left relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-black text-slate-900 flex items-center gap-4 tracking-tighter uppercase italic leading-none",children:[e.jsx(ue,{className:"text-blue-600",size:32})," Boor"," ",e.jsx("span",{className:"text-blue-600",children:"Dimensies"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100 uppercase italic",children:[e.jsx(fe,{size:10})," Root Beveiligd"]}),e.jsxs("p",{className:"text-[9px] font-mono text-slate-400 uppercase tracking-widest",children:["Target: /",P.BORE_DIMENSIONS.join("/")]})]})]}),e.jsxs("div",{className:"relative w-full md:w-72 relative z-10",children:[e.jsx(pe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:18}),e.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-bold outline-none focus:border-blue-500 transition-all shadow-inner",placeholder:"Filter op DN of PN...",value:N,onChange:l=>p(l.target.value)})]})]}),e.jsxs("section",{className:"bg-white p-10 rounded-[45px] border border-slate-200 shadow-sm mb-10 relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[e.jsx(H,{size:16,className:"text-blue-500"}),e.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] italic",children:"Nieuw Patroon Vastleggen"})]}),e.jsxs("form",{onSubmit:b,className:"grid grid-cols-2 md:grid-cols-6 gap-6 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2",children:"DN (mm)"}),e.jsx("select",{className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-black text-slate-700 outline-none focus:border-blue-500 appearance-none cursor-pointer",value:s.dn,onChange:l=>x({...s,dn:l.target.value}),children:Fe.map(l=>e.jsxs("option",{value:l,children:["ID ",l]},l))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2",children:"Drukklasse"}),e.jsx("select",{className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-black text-slate-700 outline-none focus:border-blue-500 appearance-none cursor-pointer",value:s.pn,onChange:l=>x({...s,pn:l.target.value}),children:Ge.map(l=>e.jsxs("option",{value:l,children:["PN ",l]},l))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase ml-2 italic",children:"PCD (mm)"}),e.jsx("input",{required:!0,className:"w-full p-4 bg-blue-50/50 border-2 border-blue-100 rounded-2xl text-sm font-black text-blue-700 outline-none focus:border-blue-500 text-center placeholder:text-blue-200 shadow-inner",placeholder:"000.0",value:s.pcd,onChange:l=>x({...s,pcd:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2",children:"Aantal (n)"}),e.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-bold text-slate-700 outline-none focus:border-blue-500 text-center",placeholder:"Bijv. 8",value:s.holes,onChange:l=>x({...s,holes:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2",children:"Boutmaat"}),e.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-bold text-slate-700 outline-none focus:border-blue-500 text-center",placeholder:"M..",value:s.thread,onChange:l=>x({...s,thread:l.target.value})})]}),e.jsx("button",{type:"submit",disabled:i,className:"h-[54px] bg-slate-900 text-white rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-blue-600 transition-all shadow-xl active:scale-95 disabled:opacity-50",children:i?e.jsx(J,{className:"animate-spin mx-auto",size:18}):"Vastleggen"})]})]}),e.jsxs("div",{className:"bg-white rounded-[50px] border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 border-b text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-6",children:"Configuratie (DN/PN)"}),e.jsx("th",{className:"px-8 py-6 text-blue-600",children:"PCD Steekcirkel"}),e.jsx("th",{className:"px-8 py-6",children:"Gaten (n)"}),e.jsx("th",{className:"px-8 py-6",children:"Bout Specificatie"}),e.jsx("th",{className:"px-8 py-6 text-right",children:"Beheer"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:a.map(l=>e.jsx("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:f===l.id?e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"px-8 py-4 font-black text-blue-600 italic",children:["DN",l.dn," PN",l.pn]}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("input",{className:"w-24 p-2 bg-blue-50 border-2 border-blue-200 rounded-xl font-black text-blue-700 text-center outline-none",value:k.pcd,onChange:y=>h({...k,pcd:y.target.value})})}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("input",{className:"w-20 p-2 bg-slate-100 border-2 border-slate-200 rounded-xl font-bold text-center outline-none",value:k.holes,onChange:y=>h({...k,holes:y.target.value})})}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("input",{className:"w-24 p-2 bg-slate-100 border-2 border-slate-200 rounded-xl font-bold text-center outline-none",value:k.thread,onChange:y=>h({...k,thread:y.target.value})})}),e.jsx("td",{className:"px-8 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>w(l.id),className:"p-2.5 bg-emerald-500 text-white rounded-xl shadow-lg hover:bg-emerald-600 transition-all",children:e.jsx(ke,{size:16})}),e.jsx("button",{onClick:()=>z(null),className:"p-2.5 bg-slate-200 text-slate-500 rounded-xl hover:bg-slate-300 transition-all",children:e.jsx(se,{size:16})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsxs("span",{className:"font-black text-slate-900 text-lg tracking-tighter italic leading-none",children:["ID ",l.dn]}),e.jsxs("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mt-1",children:["Drukklasse PN ",l.pn]})]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("span",{className:"bg-blue-50 text-blue-600 px-4 py-2 rounded-xl font-mono font-black text-sm border border-blue-100 shadow-inner",children:[l.pcd," mm"]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-black text-slate-700 italic",children:l.holes}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:"Gaten"})]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:"text-sm font-black text-slate-500 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-100 uppercase",children:l.thread})}),e.jsx("td",{className:"px-8 py-5 text-right opacity-0 group-hover:opacity-100 transition-all",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>{z(l.id),h(l)},className:"p-3 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all",children:e.jsx(De,{size:18})}),e.jsx("button",{onClick:()=>R(l.id),className:"p-3 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all",children:e.jsx(ne,{size:18})})]})})]})},l.id))})]}),a.length===0&&e.jsxs("div",{className:"p-20 text-center opacity-30 italic",children:[e.jsx(D,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest text-slate-400",children:"Geen patronen gevonden voor deze filters"})]})]}),e.jsxs("div",{className:"mt-12 bg-slate-900 p-8 rounded-[45px] text-white/50 text-[10px] font-black uppercase tracking-[0.2em] flex items-center gap-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 rotate-12",children:e.jsx(D,{size:100})}),e.jsx("div",{className:"p-3 bg-blue-600 rounded-xl text-white shadow-lg",children:e.jsx(q,{size:20})}),e.jsxs("div",{className:"text-left flex-1 relative z-10 leading-relaxed max-w-3xl",children:["De boorpatronen in deze lijst worden gebruikt door de"," ",e.jsx("strong",{children:"Product Configurator"})," en"," ",e.jsx("strong",{children:"Eindinspectie"}),"om te controleren of flenzen voldoen aan de technische eisen. Wijzigingen zijn direct live voor alle terminals."]})]})]})},le=["future-factory","settings","site_config","app"],st=(o,m,c)=>async()=>{o(!0);try{const n=await Q(G(M,"future-factory","settings","site_config","main"));if(n.exists()){const i=n.data(),j={logo:i.logo||"",siteName:i.siteName||i.appName||"",color:i.color||i.themeColor||"",logoUrl:i.logoUrl||"",themeColor:i.themeColor||"",uploadedLogos:i.uploadedLogos||[],appName:i.appName||i.siteName||""};await X(G(M,...le),j,{merge:!0}),m(j),c("success","Site-configuratie succesvol gemigreerd naar /app")}else c("error","Geen oude site-configuratie gevonden in /main")}catch(n){c("error",`Migratie mislukt: ${n.message}`)}finally{o(!1)}},kt=({onBack:o})=>{const[m,c]=d.useState("matrix"),[n,i]=d.useState(!0),[j,f]=d.useState({type:"",msg:""}),[z,k]=d.useState(!1),[h,N]=d.useState({}),[p,s]=d.useState({}),[x,b]=d.useState({}),[w,R]=d.useState({}),a=(E,O)=>f({type:E,msg:O}),l=st(i,b,a);d.useEffect(()=>{(async()=>{try{const[O,F,W,u,S]=await Promise.all([Q(G(M,...P.MATRIX_CONFIG)),Q(G(M,...P.GENERAL_SETTINGS)),Q(G(M,...P.BLUEPRINTS)),Q(G(M,...le)),Q(G(M,"future-factory","settings","site_config","main"))]);if(O.exists()&&N(O.data()),F.exists()&&s(F.data()),W.exists()&&R(W.data()),u.exists())b(u.data());else if(S.exists()){const g=S.data(),I={logo:g.logo||"",siteName:g.siteName||g.appName||"",color:g.color||g.themeColor||"",logoUrl:g.logoUrl||"",themeColor:g.themeColor||"",uploadedLogos:g.uploadedLogos||[],appName:g.appName||g.siteName||""};await X(G(M,...le),I,{merge:!0}),b(I)}console.log(" Matrix Hub: Alle data gesynchroniseerd.")}catch(O){a("error",`Sync fout: ${O.message}`)}finally{i(!1)}})()},[]);const y=async()=>{i(!0);let E=[],O={};if(m==="matrix")E=P.MATRIX_CONFIG,O=h;else if(m==="library"){E=P.GENERAL_SETTINGS;const F=["connections","product_names","pns","diameters","borings","codes"],{logo:W,siteName:u,color:S,logoUrl:g,themeColor:I,uploadedLogos:B,appName:$,...A}=p;O=Object.fromEntries(Object.entries(A).filter(([V])=>F.includes(V))),(W||u||S||g||I||B&&B.length||$)&&await X(G(M,...le),{logo:W,siteName:u,color:S,logoUrl:g,themeColor:I,uploadedLogos:B,appName:$},{merge:!0})}else if(m==="blueprints")E=P.BLUEPRINTS,O=w;else{i(!1);return}try{await X(G(M,...E),{...O,lastUpdated:ee(),updatedBy:"Admin Hub Core"},{merge:!0}),a("success","Wijzigingen live gepubliceerd!"),k(!1)}catch(F){a("error",`Opslaan mislukt: ${F.message}`)}finally{i(!1),setTimeout(()=>f({type:"",msg:""}),4e3)}},L=[{id:"matrix",label:"Beschikbaarheid",icon:e.jsx(Pe,{size:14})},{id:"drilling",label:"Boringen",icon:e.jsx(Z,{size:14})},{id:"ranges",label:"Wanddiktes",icon:e.jsx(Ue,{size:14})},{id:"library",label:"Bibliotheek",icon:e.jsx(_e,{size:14})},{id:"blueprints",label:"Blauwdrukken",icon:e.jsx(Y,{size:14})},{id:"dimensions",label:"Maatvoering",icon:e.jsx(ue,{size:14})},{id:"admin_upload",label:"Bulk Upload",icon:e.jsx(Se,{size:14})},{id:"specs",label:"Overzicht",icon:e.jsx(ie,{size:14})}];return n&&Object.keys(h).length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-slate-50 gap-4",children:[e.jsx(J,{className:"animate-spin text-blue-600",size:48}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 italic",children:"Matrix Hub Laden..."})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-8 py-4 flex justify-between items-center shrink-0 shadow-sm z-20 w-full h-20",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3 italic uppercase leading-none",children:[e.jsx(Ke,{size:24,className:"text-blue-600"})," Matrix"," ",e.jsx("span",{className:"text-blue-600",children:"Hub"})]}),e.jsxs("button",{onClick:l,className:"ml-4 px-6 py-2 rounded-xl bg-emerald-600 text-white font-black text-xs uppercase tracking-widest shadow hover:bg-emerald-700 transition-all",disabled:n,title:"Migreer site-configuratie van main naar app",children:[n?e.jsx(de,{className:"animate-spin inline",size:16}):e.jsx(D,{size:16,className:"inline"})," Site-config migreren"]}),["matrix","library","blueprints"].includes(m)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-8 w-px bg-slate-200"}),e.jsxs("button",{onClick:y,disabled:n||!z&&j.type!=="error",className:`px-8 py-2.5 rounded-xl transition-all font-black text-sm flex items-center gap-2 shadow-lg uppercase tracking-widest ${z||j.type==="error"?"bg-slate-900 text-white hover:bg-blue-600":"bg-slate-100 text-slate-300"}`,children:[n?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(ae,{size:18})," ","Opslaan"]})]})]})}),e.jsx("div",{className:"flex justify-center bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-10 w-full overflow-x-auto no-scrollbar",children:e.jsx("div",{className:"flex gap-4 px-8",children:L.map(E=>e.jsxs("button",{onClick:()=>c(E.id),className:`py-4 px-4 text-[10px] font-black uppercase tracking-widest border-b-4 transition-all whitespace-nowrap ${m===E.id?"border-blue-600 text-slate-900 bg-slate-50/50":"border-transparent text-slate-400 hover:text-slate-600"}`,children:[e.jsx("span",{className:"mr-2 opacity-50",children:E.icon}),E.label]},E.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-50 custom-scrollbar w-full flex justify-center pb-20 text-left",children:e.jsxs("div",{className:"w-full max-w-7xl p-8 animate-in fade-in duration-300",children:[m==="matrix"&&e.jsx(Xe,{libraryData:p,matrixData:h,setMatrixData:N,setHasUnsavedChanges:k}),m==="drilling"&&e.jsx(tt,{}),m==="ranges"&&e.jsx(et,{}),m==="library"&&e.jsx(qe,{libraryData:p,setLibraryData:s,setHasUnsavedChanges:k,blueprints:w}),m==="blueprints"&&e.jsx(Ze,{blueprints:w,setBlueprints:R,libraryData:p,setHasUnsavedChanges:k}),m==="dimensions"&&e.jsx(Je,{libraryData:p,blueprints:w,productRange:h}),m==="admin_upload"&&e.jsx(Ye,{}),m==="specs"&&e.jsx(Qe,{blueprints:w})]})})]})};export{kt as default};
