import{c as Ce,i as re,d as j,e as f,j as e,L as Y,S as F,g as De,W as Ie,q as ze,X as ne,s as Ae,Y as ie,$ as Pe,R as Me,n as $e,D as Ee,N as Oe}from"./index-DNbqce-j.js";import{r as d}from"./react-vendor-CkwvfVK2.js";import{o as G,q as Te,x as We,j as oe,l as w,B as _,G as Le,s as H,t as de}from"./firebase-DdpHYWNd.js";import{p as E,C as Re,n as O}from"./hubHelpers-if0OQD1V.js";import{g as T,s as Ue}from"./index-CSXCcwhn.js";import{f as W}from"./index-CFK5EZMp.js";import{e as Ye}from"./index-BoyFRaS1.js";import{i as Fe}from"./index-BN4zWGSM.js";import{U as Ge}from"./users-BzjIxhpA.js";import{T as _e,U as He}from"./AdminDashboard-BkhDkzix.js";import{P as Ve}from"./plus-fTGSighL.js";import{C as Be}from"./chevron-left-BrN2e-EN.js";import{s as ce,i as qe}from"./index-CN0OcPUZ.js";import{l as xe}from"./index-DiNM8yMF.js";import{a as Ke}from"./index-CHWv9JIR.js";import{C as Ze}from"./copy-1aL2jCM4.js";import{C as Xe}from"./cpu-BQwTkJut.js";import{C as Je}from"./clock-yngyoSLs.js";import{P as Qe}from"./pen-line-Bf9VQy3c.js";import{T as et}from"./trash-2-CmT6fCSF.js";import"./index-jHXuI3CI.js";import"./setPrototypeOf-DgZC2w_0.js";import"./defineProperty-Cg-f50Hq.js";import"./index-B01KZ34F.js";import"./index-BAcl2P2b.js";import"./arrow-left-CeHKlJCF.js";import"./book-open-Dw5UZXUq.js";import"./index-TtjwkAWP.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Ce("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),At=()=>{var te,se,ae,le;const[L,me]=d.useState([]),[C,pe]=d.useState([]),[N,ue]=d.useState({departments:[]}),[be,he]=d.useState(!0),[D,V]=d.useState("assignment"),[z,fe]=d.useState(""),[ge,B]=d.useState({}),[u,q]=d.useState(new Date),[A,K]=d.useState("DAY"),[je,P]=d.useState(!1),[R,U]=d.useState(null),[Z,X]=d.useState(!1),[J,Q]=d.useState(!1),[ee,M]=d.useState(null);T(u);const g=W(u,"yyyy-MM-dd"),[l,h]=d.useState({name:"",employeeNumber:"",departmentId:"",rotationType:"STATIC",shiftId:"DAG",isActive:!0,rotationSchedule:{enabled:!1,startWeek:1,startYear:new Date().getFullYear(),shifts:["DAG"]}});d.useEffect(()=>{if(!re("PERSONNEL")||!re("OCCUPANCY"))return;const t=G(Te(oe(f,...j.PERSONNEL),We("name")),n=>me(n.docs.map(a=>({id:a.id,...a.data()})))),r=G(oe(f,...j.OCCUPANCY),n=>pe(n.docs.map(a=>({id:a.id,...a.data()})))),s=G(w(f,...j.FACTORY_CONFIG),n=>{if(n.exists()){const a=n.data();ue(a);const m={};(a.departments||[]).forEach(o=>{m[o.id]=!0}),B(m)}he(!1)});return()=>{t(),r(),s()}},[]);const k=t=>{const r=(N.departments||[]).find(s=>s.id===t);return r&&r.shifts&&r.shifts.length>0?r.shifts:[{id:"DAG",label:"Dagdienst",start:"07:15",end:"16:00"}]},Ne=(t,r,s=u)=>{var m,o;const n=k(r);let a;if((m=t.rotationSchedule)!=null&&m.enabled&&((o=t.rotationSchedule.shifts)==null?void 0:o.length)>0){const x=T(s),b=t.rotationSchedule.startWeek||1,c=t.rotationSchedule.shifts,p=((x-b)%c.length+c.length)%c.length,I=c[p];a=n.find(v=>v.id===I)||n[0]}else a=n.find(x=>x.id===t.shiftId)||n[0];try{const x=E(a.start,"HH:mm",new Date);let c=(E(a.end,"HH:mm",new Date)-x)/(1e3*60*60);return c<0&&(c+=24),{label:a.label,total:Math.max(0,c-.75),times:`${a.start}-${a.end}`}}catch{return{label:"Dagdienst",total:8,times:"07:15-16:00"}}},S=d.useMemo(()=>{const t=Ue(u),r=Ye(u),s={global:{hours:0,count:0},byDept:{}};(N.departments||[]).forEach(a=>{s.byDept[a.id]={name:a.name,hours:0,count:0,operators:new Set}});const n=new Set;return C.forEach(a=>{if(A==="DAY"?a.date===g:Fe(E(a.date,"yyyy-MM-dd",new Date),{start:t,end:r})){const o=parseFloat(a.hoursWorked||0);s.global.hours+=o,n.add(a.operatorNumber),s.byDept[a.departmentId]&&(s.byDept[a.departmentId].hours+=o,s.byDept[a.departmentId].operators.add(a.operatorNumber))}}),s.global.count=n.size,Object.keys(s.byDept).forEach(a=>{s.byDept[a].count=s.byDept[a].operators.size}),s},[C,A,g,u,N.departments]),ye=d.useMemo(()=>{const t={};return(N.departments||[]).forEach(r=>{const s=r.country||"Nederland";t[s]||(t[s]=[]),t[s].push(r)}),t},[N.departments]),ve=async(t,r,s)=>{try{const n=j.OCCUPANCY;if(!r||r===""){const x=C.filter(b=>O(b.machineId)===O(t)&&b.date===g&&b.departmentId===s);for(const b of x)await _(w(f,...n,b.id));return}const a=L.find(x=>x.employeeNumber===r);if(!a)return;const m=`${g}_${s}_${t}_${a.employeeNumber}`.replace(/[^a-zA-Z0-9]/g,"_"),o=Ne(a,s,E(g,"yyyy-MM-dd",new Date));await de(w(f,...n,m),{id:m,machineId:t,operatorNumber:a.employeeNumber,operatorName:a.name,departmentId:s,date:g,hoursWorked:o.total,shift:o.label,updatedAt:H()},{merge:!0})}catch(n){console.error(n)}},we=async()=>{const t=W(ce(u,1),"yyyy-MM-dd"),r=C.filter(s=>s.date===t&&s.operatorNumber);if(r.length===0)return alert("Geen bezetting van gisteren gevonden.");Q(!0);try{const s=Le(f);r.forEach(n=>{const a=`${g}_${n.departmentId}_${n.machineId}_${n.operatorNumber}`.replace(/[^a-zA-Z0-9]/g,"_");s.set(w(f,...j.OCCUPANCY,a),{...n,id:a,date:g,updatedAt:H()},{merge:!0})}),await s.commit(),M({type:"success",msg:`${r.length} lopers overgezet!`}),setTimeout(()=>M(null),3e3)}catch(s){alert(s.message)}finally{Q(!1)}},ke=async t=>{var r;t.preventDefault(),X(!0);try{const s=R||`P_${l.employeeNumber}`;await de(w(f,...j.PERSONNEL,s),{...l,lastUpdated:H(),updatedBy:((r=Oe.currentUser)==null?void 0:r.email)||"Admin"},{merge:!0}),P(!1),U(null),M({type:"success",msg:"Medewerker opgeslagen"}),setTimeout(()=>M(null),3e3)}catch(s){alert("Fout: "+s.message)}finally{X(!1)}},Se=t=>{h(t),U(t.id),P(!0)};return be?e.jsxs("div",{className:"h-full flex items-center justify-center bg-slate-50 gap-4",children:[e.jsx(Y,{className:"animate-spin text-blue-600",size:48}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 italic",children:"Identiteiten synchroniseren..."})]}):e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden text-left animate-in fade-in",children:[e.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 flex flex-col gap-4 shrink-0 z-20 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-[18px] shadow-xl",children:e.jsx(Ge,{size:22})}),e.jsxs("div",{className:"text-left text-left",children:[e.jsxs("h2",{className:"text-xl font-black text-slate-900 uppercase italic tracking-tighter leading-none",children:["Personeel & Bezetting ",e.jsx("span",{className:"text-blue-600 text-sm",children:"/ Resource Control"})]}),e.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100 uppercase italic",children:[e.jsx(F,{size:9})," Root Authorized"]}),e.jsxs("p",{className:"text-[8px] font-mono text-slate-400 uppercase tracking-widest",children:["Node: /",j.PERSONNEL.join("/")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsxs("button",{onClick:()=>K("DAY"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${A==="DAY"?"bg-white text-blue-600 shadow-sm":"text-slate-400"}`,children:[e.jsx(tt,{size:12})," Dag"]}),e.jsxs("button",{onClick:()=>K("WEEK"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${A==="WEEK"?"bg-white text-emerald-600 shadow-sm":"text-slate-400"}`,children:[e.jsx(_e,{size:12})," Week"]})]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>V("assignment"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${D==="assignment"?"bg-white text-slate-900 shadow-sm":"text-slate-400"}`,children:"Bezetting"}),e.jsx("button",{onClick:()=>V("personnel"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${D==="personnel"?"bg-white text-slate-900 shadow-sm":"text-slate-400"}`,children:"Database"})]}),e.jsxs("button",{onClick:()=>{var r;U(null);const t=T(new Date);h({name:"",employeeNumber:"",departmentId:((r=N.departments[0])==null?void 0:r.id)||"",rotationType:"STATIC",shiftId:"DAG",isActive:!0,rotationSchedule:{enabled:!1,startWeek:t,startYear:new Date().getFullYear(),shifts:["DAG"]}}),P(!0)},className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-xl hover:bg-blue-700 transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(Ve,{size:16})," Nieuw"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 border-t border-slate-50 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900 text-white p-1.5 rounded-[20px] shadow-2xl",children:[e.jsx("button",{onClick:()=>q(t=>ce(t,1)),className:"p-2.5 hover:bg-white/10 rounded-xl transition-all",children:e.jsx(Be,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center px-6 min-w-[200px]",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest mb-1",children:qe(u)?"Vandaag":W(u,"eeee",{locale:xe})}),e.jsx("span",{className:"text-base font-black uppercase italic tracking-tight",children:W(u,"dd MMMM yyyy",{locale:xe})})]}),e.jsx("button",{onClick:()=>q(t=>Ke(t,1)),className:"p-2.5 hover:bg-white/10 rounded-xl transition-all",children:e.jsx(De,{size:20})})]}),e.jsxs("button",{onClick:we,disabled:J,className:"px-6 py-3 bg-white border-2 border-slate-100 text-slate-400 rounded-xl font-black text-[10px] uppercase tracking-widest flex items-center gap-2 hover:border-blue-500 hover:text-blue-600 transition-all active:scale-95 disabled:opacity-50 shadow-sm",children:[J?e.jsx(Y,{className:"animate-spin",size:16}):e.jsx(Ze,{size:16})," ","Herhaal Gisteren"]}),ee&&e.jsx("div",{className:"bg-emerald-50 text-emerald-600 px-6 py-3 rounded-2xl border border-emerald-100 text-[10px] font-black uppercase animate-in zoom-in",children:ee.msg}),D==="assignment"&&e.jsx("div",{className:"flex-1 flex items-center gap-4 overflow-x-auto no-scrollbar py-2 justify-end",children:e.jsxs("div",{className:"bg-slate-900 px-6 py-4 rounded-3xl flex items-center gap-6 border border-white/5 shadow-xl shrink-0",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-[9px] font-black text-blue-400 uppercase block mb-1",children:"Totaal Volume"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 text-white",children:[e.jsx("span",{className:"text-2xl font-black italic",children:S.global.hours.toFixed(1)}),e.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"u"})]})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex items-center gap-3 text-emerald-400",children:[e.jsx(He,{size:20}),e.jsx("span",{className:"text-xl font-black italic",children:S.global.count})]})]})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar bg-slate-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto pb-40",children:[D==="assignment"&&e.jsx("div",{className:"space-y-16",children:Object.entries(ye).sort().map(([t,r])=>e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 border-b-2 border-slate-200 pb-4 ml-2",children:[e.jsx(Ie,{size:24,className:"text-slate-400"}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase italic tracking-tighter",children:t})]}),e.jsx("div",{className:"space-y-4",children:r.map(s=>{var m,o,x,b;const n=ge[s.id]===!0,a=[...s.stations||[]].sort((c,y)=>(c.name||"").toLowerCase().includes("teamleader")?-1:1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>B(c=>({...c,[s.id]:!c[s.id]})),className:`w-full flex items-center justify-between p-6 rounded-[35px] transition-all border-2 ${n?"bg-white border-blue-500 shadow-xl":"bg-white border-slate-100 hover:border-blue-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-6 flex-1 text-left",children:[e.jsx("div",{className:`p-3 rounded-2xl transition-all ${n?"bg-blue-600 text-white scale-110":"bg-slate-100 text-slate-400"}`,children:e.jsx(ze,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:`text-lg font-black uppercase italic tracking-tighter ${n?"text-slate-900":"text-slate-600"}`,children:s.name}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mt-1",children:[a.length," Actieve Stations"]})]})]}),e.jsxs("div",{className:"flex items-center gap-8 mr-10 hidden lg:flex",children:[e.jsxs("div",{className:"text-right px-6 border-r border-slate-100",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-300 uppercase block mb-1",children:"Capaciteit"}),e.jsxs("span",{className:`text-xl font-black italic ${((m=S.byDept[s.id])==null?void 0:m.hours)>0?"text-blue-600":"text-slate-200"}`,children:[(o=S.byDept[s.id])==null?void 0:o.hours.toFixed(1),"u"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-300 uppercase block mb-1",children:"Inzet"}),e.jsx("span",{className:`text-xl font-black italic ${((x=S.byDept[s.id])==null?void 0:x.count)>0?"text-slate-800":"text-slate-200"}`,children:(b=S.byDept[s.id])==null?void 0:b.count})]})]}),e.jsx("div",{className:`p-2.5 rounded-xl transition-transform duration-500 ${n?"rotate-0 bg-blue-100 text-blue-600":"rotate-180 bg-slate-50 text-slate-300"}`,children:e.jsx(Re,{size:24})})]}),n&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-in zoom-in-95 p-2",children:a.map(c=>{const y=c.name,p=y.toLowerCase().includes("teamleader"),I=C.filter(i=>O(i.machineId)===O(y)&&i.date===g&&i.departmentId===s.id),v=I.some(i=>i.operatorNumber);return e.jsxs("div",{className:`p-6 rounded-[40px] border-2 transition-all relative flex flex-col shadow-sm text-left ${p?v?"bg-slate-900 border-amber-400 ring-8 ring-amber-400/10":"bg-slate-900 border-slate-800 opacity-60":v?"bg-white border-blue-500 ring-8 ring-blue-50/50":"bg-white border-slate-100 hover:border-blue-400"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest block mb-1.5 ${p?"text-amber-500 italic":"text-slate-400 opacity-60"}`,children:p?"Operational Lead":"Workstation"}),e.jsx("h4",{className:`text-xl font-black italic tracking-tighter uppercase truncate leading-none ${p?"text-white":"text-slate-900"}`,children:y})]}),p?e.jsx(F,{size:24,className:v?"text-amber-400":"text-slate-700"}):e.jsx(Xe,{size:24,className:v?"text-blue-600":"text-slate-200"})]}),e.jsxs("div",{className:"space-y-3 mb-6 flex-1 text-left",children:[I.filter(i=>i.operatorNumber).map(i=>{var $;return e.jsxs("div",{className:`p-4 rounded-[22px] border transition-all flex items-center justify-between ${p?"bg-white/5 border-white/10 text-white":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{className:"text-left overflow-hidden",children:[e.jsx("h5",{className:`text-base font-black uppercase italic truncate mb-1 ${p?"text-amber-400":"text-slate-950"}`,children:i.operatorName}),e.jsxs("div",{className:"flex items-center gap-2 opacity-70",children:[e.jsx(Je,{size:12,className:"text-blue-500"}),e.jsxs("span",{className:"text-[10px] font-black",children:[(($=i.hoursWorked)==null?void 0:$.toFixed(1))||0,"u"]})]})]}),e.jsx("button",{onClick:()=>_(w(f,...j.OCCUPANCY,i.id)),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:e.jsx(ne,{size:18})})]},i.id)}),!v&&e.jsx("div",{className:`py-6 border-2 border-dashed rounded-[25px] flex flex-col items-center justify-center opacity-30 ${p?"border-white/10":"border-slate-200"}`,children:e.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest ${p?"text-slate-600":"text-slate-400"}`,children:"Onbemand"})})]}),e.jsxs("select",{className:`w-full p-3 rounded-2xl font-black text-[10px] uppercase outline-none transition-all appearance-none cursor-pointer border-2 ${p?"bg-white/5 border-white/10 text-slate-400 hover:border-amber-400 focus:border-amber-400 shadow-inner":"bg-slate-50 border-slate-100 text-slate-400 hover:border-blue-400 focus:border-blue-500"}`,value:"",onChange:i=>ve(y,i.target.value,s.id),children:[e.jsx("option",{value:"",children:"+ Operator Toevoegen"}),L.filter(i=>i.departmentId===s.id&&i.isActive!==!1&&!I.some($=>$.operatorNumber===i.employeeNumber)).map(i=>e.jsx("option",{value:i.employeeNumber,children:i.name},i.id))]})]},c.id)})})]},s.id)})})]},t))}),D==="personnel"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsx("div",{className:"bg-white p-6 rounded-[35px] border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{className:"relative flex-1 w-full group",children:[e.jsx(Ae,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-blue-500 transition-colors",size:20}),e.jsx("input",{type:"text",placeholder:"Zoek op naam of personeelsnummer...",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl text-sm font-bold outline-none focus:border-blue-500 focus:bg-white transition-all shadow-inner",value:z,onChange:t=>fe(t.target.value)})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:L.filter(t=>!z||t.name.toLowerCase().includes(z.toLowerCase())||t.employeeNumber.includes(z)).map(t=>e.jsxs("div",{className:"bg-white p-6 rounded-[40px] border-2 border-slate-100 hover:border-blue-400 transition-all group shadow-sm flex flex-col relative overflow-hidden text-left",children:[e.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 rotate-12",children:e.jsx(ie,{size:100})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl shadow-lg",children:e.jsx(ie,{size:24})}),e.jsxs("div",{className:"text-left overflow-hidden",children:[e.jsx("h4",{className:"font-black text-slate-950 text-base uppercase italic truncate leading-none mb-1.5",children:t.name}),e.jsx("span",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest italic",children:t.employeeNumber})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-50 flex items-center justify-between opacity-0 group-hover:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>Se(t),className:"p-3 text-slate-400 hover:text-blue-600 bg-slate-50 rounded-xl transition-all",children:e.jsx(Qe,{size:18})}),e.jsx("button",{onClick:async()=>window.confirm("Verwijderen?")&&await _(w(f,...j.PERSONNEL,t.id)),className:"p-3 text-slate-300 hover:text-rose-500 bg-slate-50 rounded-xl transition-all",children:e.jsx(et,{size:18})})]})]},t.id))})]})]})}),je&&e.jsx("div",{className:"fixed inset-0 z-[1000] bg-slate-950/80 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in overflow-y-auto",children:e.jsxs("div",{className:"bg-white w-full max-w-xl rounded-[45px] shadow-2xl flex flex-col border border-white/10 animate-in zoom-in-95 my-8 max-h-[calc(100vh-4rem)]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 text-white rounded-2xl shadow-lg",children:e.jsx(Pe,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-900 uppercase italic tracking-tighter leading-none",children:[R?"Edit":"New"," ",e.jsx("span",{className:"text-blue-600",children:"Resource"})]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1.5",children:"Master Personnel Database"})]})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-3 hover:bg-slate-200 text-slate-300 rounded-2xl transition-all",children:e.jsx(ne,{size:28})})]}),e.jsxs("form",{onSubmit:ke,className:"p-6 space-y-6 text-left overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 block",children:"Naam Medewerker"}),e.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-black text-slate-800 outline-none focus:border-blue-500 transition-all text-sm",value:l.name,onChange:t=>h({...l,name:t.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 block",children:"Personeelsnummer"}),e.jsx("input",{required:!0,disabled:!!R,className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-black text-slate-800 outline-none focus:border-blue-500 transition-all text-sm disabled:opacity-50",value:l.employeeNumber,onChange:t=>h({...l,employeeNumber:t.target.value.replace(/\D/g,"")})})]})]}),e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 block",children:"Standaard Afdeling"}),e.jsxs("select",{className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold outline-none focus:border-blue-500 text-sm cursor-pointer",value:l.departmentId,onChange:t=>h({...l,departmentId:t.target.value}),children:[e.jsx("option",{value:"",children:"Kies afdeling..."}),N.departments.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 block",children:"Ploegen Type"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>h({...l,rotationSchedule:{...l.rotationSchedule,enabled:!1}}),className:`flex-1 p-4 rounded-xl border-2 transition-all font-bold text-xs ${(te=l.rotationSchedule)!=null&&te.enabled?"bg-slate-50 border-slate-200 text-slate-500 hover:border-slate-300":"bg-blue-50 border-blue-500 text-blue-700"}`,children:"ðŸ”’ Vaste Ploeg"}),e.jsx("button",{type:"button",onClick:()=>h({...l,rotationSchedule:{...l.rotationSchedule,enabled:!0,startWeek:T(u),shifts:l.departmentId?k(l.departmentId).filter(t=>t.id!=="DAG").slice(0,2).map(t=>t.id):[]}}),className:`flex-1 p-4 rounded-xl border-2 transition-all font-bold text-xs ${(se=l.rotationSchedule)!=null&&se.enabled?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-slate-50 border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"ðŸ”„ Rotatie Ploegen"})]})]}),!((ae=l.rotationSchedule)!=null&&ae.enabled)&&e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 block italic",children:"Vaste Ploeg"}),e.jsxs("select",{className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold outline-none focus:border-blue-500 text-sm cursor-pointer",value:l.shiftId,onChange:t=>h({...l,shiftId:t.target.value}),children:[e.jsx("option",{value:"DAG",children:"Dagdienst"}),l.departmentId&&k(l.departmentId).map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]})]}),((le=l.rotationSchedule)==null?void 0:le.enabled)&&e.jsxs("div",{className:"space-y-4 bg-emerald-50/50 p-5 rounded-2xl border-2 border-emerald-100",children:[e.jsxs("div",{className:"space-y-1.5 text-left",children:[e.jsxs("label",{className:"text-[10px] font-black text-emerald-700 uppercase ml-2 block flex items-center gap-2",children:[e.jsx(Me,{size:12})," Start Deze Week Met"]}),e.jsx("select",{className:"w-full p-3 bg-white border-2 border-emerald-200 rounded-xl font-bold outline-none focus:border-emerald-500 text-sm cursor-pointer",value:l.rotationSchedule.shifts[0]||"",onChange:t=>{const r=t.target.value,s=l.departmentId?k(l.departmentId).filter(o=>o.id!=="DAG"):[],n=s.findIndex(o=>o.id===r),a=[],m=Math.min(s.length,3);for(let o=0;o<m;o++){const x=(n+o)%s.length;a.push(s[x].id)}h({...l,rotationSchedule:{...l.rotationSchedule,shifts:a}})},children:l.departmentId&&k(l.departmentId).filter(t=>t.id!=="DAG").map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-emerald-200",children:[e.jsx("p",{className:"text-[9px] font-black text-emerald-600 uppercase tracking-wider mb-2",children:"Rotatie Schema:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:l.rotationSchedule.shifts.map((t,r)=>{const s=k(l.departmentId).find(n=>n.id===t);return e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-800 rounded-lg text-xs font-bold",children:["Week ",r+1,": ",(s==null?void 0:s.label)||t]},r)})}),e.jsxs("p",{className:"text-[8px] text-emerald-600 mt-2 italic",children:["Start: Week ",l.rotationSchedule.startWeek," â€¢ Herhaalt elke ",l.rotationSchedule.shifts.length," weken"]})]})]}),e.jsx("div",{className:"flex flex-col justify-center gap-2",children:e.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-2xl border-2 border-slate-100 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:l.isActive,onChange:t=>h({...l,isActive:t.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase text-slate-700",children:"Account Actief"})]})})]}),e.jsxs("button",{type:"submit",disabled:Z,className:"w-full py-5 bg-slate-900 text-white rounded-[30px] font-black uppercase text-sm tracking-[0.3em] shadow-2xl hover:bg-blue-600 transition-all flex items-center justify-center gap-4 active:scale-95 disabled:opacity-50 shrink-0",children:[Z?e.jsx(Y,{className:"animate-spin"}):e.jsx($e,{size:24})," ","Gegevens Vastleggen"]})]})]})}),e.jsxs("div",{className:"p-4 bg-slate-950 border-t border-white/5 flex justify-between items-center text-[10px] font-black text-slate-600 uppercase tracking-[0.4em] px-10 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("span",{className:"flex items-center gap-2 text-emerald-500/50",children:[e.jsx(F,{size:14})," Forensic Audit Node"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ee,{size:14})," Central Resource Vault"]})]}),e.jsx("span",{className:"opacity-30 italic",children:"Future Factory MES v6.11"})]})]})};export{At as default};
