import{d as T,e as E,j as e,g as _}from"./index-DNbqce-j.js";import{r as o}from"./react-vendor-CkwvfVK2.js";import{o as W,j as I}from"./firebase-DdpHYWNd.js";import{s as w}from"./index-B01KZ34F.js";import{r as V,t as f}from"./index-jHXuI3CI.js";import{a as y}from"./index-CHWv9JIR.js";import{C as R}from"./chevron-left-BrN2e-EN.js";import{f as u}from"./index-CFK5EZMp.js";import{l as D}from"./index-DiNM8yMF.js";import{i as p,s as z}from"./index-CN0OcPUZ.js";import{d as A}from"./index-DvKXYWrU.js";import"./index-TtjwkAWP.js";function L(g,j){var m;V(1,arguments);var h=g||{},b=f(h.start),v=f(h.end),i=v.getTime();if(!(b.getTime()<=i))throw new RangeError("Invalid interval");var x=[],a=b;a.setHours(0,0,0,0);var d=Number((m=void 0)!==null&&m!==void 0?m:1);if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;a.getTime()<=i;)x.push(f(a)),a.setDate(a.getDate()+d),a.setHours(0,0,0,0);return x}const te=()=>{const[g,j]=o.useState([]),[m,h]=o.useState([]),[b,v]=o.useState(!0),[i,x]=o.useState(w(new Date,{weekStartsOn:1})),[a,d]=o.useState(14),[P,q]=o.useState("ALLES");o.useEffect(()=>{const t=W(I(E,...T.PLANNING),l=>{const r=l.docs.map(n=>({id:n.id,...n.data()}));j(r);const s=[...new Set(r.map(n=>n.machine).filter(Boolean))];h(s.sort()),v(!1)});return()=>t()},[]);const N=o.useMemo(()=>L({start:i,end:y(i,a-1)}),[i,a]),c=80,k=t=>g.filter(l=>l.machine===t&&l.plannedDate),S=t=>{if(!t.plannedDate)return null;const l=new Date(t.plannedDate.seconds*1e3),r=A(l,i);if(r<0||r>=a)return null;const s=Math.max(1,Math.ceil((t.plan||0)/100));return{left:`${r*c}px`,width:`${s*c-8}px`}},$=t=>{const l=t.status||"planned";return{planned:"bg-blue-500",in_production:"bg-orange-500",quality_check:"bg-purple-500",ready_to_ship:"bg-emerald-500",shipped:"bg-slate-400"}[l]||"bg-slate-500"},C=()=>x(t=>z(t,7)),M=()=>x(t=>y(t,7)),O=()=>x(w(new Date,{weekStartsOn:1}));return b?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 bg-slate-50 min-h-screen",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 mb-6 shadow-sm border-2 border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-800",children:["Gantt ",e.jsx("span",{className:"text-blue-600",children:"Planning"})]}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Visuele timeline van orderplanning per machine"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(7),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${a===7?"bg-blue-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"1 Week"}),e.jsx("button",{onClick:()=>d(14),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${a===14?"bg-blue-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"2 Weken"}),e.jsx("button",{onClick:()=>d(30),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${a===30?"bg-blue-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"1 Maand"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(R,{size:20})}),e.jsx("button",{onClick:O,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-bold transition-colors",children:"Vandaag"}),e.jsx("button",{onClick:M,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(_,{size:20})})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border-2 border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b-2 border-slate-200 bg-slate-50",children:[e.jsx("div",{className:"w-48 flex-shrink-0 p-4 border-r-2 border-slate-200 font-bold text-sm text-slate-700",children:"Machine"}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsx("div",{className:"flex",style:{minWidth:`${a*c}px`},children:N.map((t,l)=>e.jsxs("div",{className:`flex-shrink-0 border-r border-slate-200 p-2 text-center ${p(t)?"bg-blue-50":""}`,style:{width:`${c}px`},children:[e.jsx("div",{className:`text-xs font-bold ${p(t)?"text-blue-600":"text-slate-700"}`,children:u(t,"EEE",{locale:D})}),e.jsx("div",{className:`text-lg font-black ${p(t)?"text-blue-600":"text-slate-800"}`,children:u(t,"d")}),e.jsx("div",{className:"text-xs text-slate-500",children:u(t,"MMM",{locale:D})})]},l))})})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:m.map((t,l)=>{const r=k(t);return e.jsxs("div",{className:`flex border-b border-slate-200 hover:bg-slate-50 transition-colors ${l%2===0?"bg-white":"bg-slate-50/50"}`,children:[e.jsxs("div",{className:"w-48 flex-shrink-0 p-4 border-r-2 border-slate-200",children:[e.jsx("div",{className:"font-bold text-sm text-slate-800",children:t}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[r.length," orders"]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsxs("div",{className:"relative h-20",style:{minWidth:`${a*c}px`},children:[N.map((s,n)=>e.jsx("div",{className:`absolute top-0 h-full border-r ${p(s)?"border-blue-300 bg-blue-50/30":"border-slate-100"}`,style:{left:`${n*c}px`,width:`${c}px`}},n)),r.map(s=>{const n=S(s);return n?e.jsxs("div",{className:`absolute top-2 ${$(s)} rounded-lg p-2 shadow-md hover:shadow-lg transition-shadow cursor-pointer group`,style:n,children:[e.jsx("div",{className:"text-white text-xs font-bold truncate",children:s.orderId||s.item}),e.jsxs("div",{className:"text-white text-xs opacity-90",children:[s.plan," stuks"]}),e.jsxs("div",{className:"hidden group-hover:block absolute bottom-full left-0 mb-2 bg-slate-900 text-white p-3 rounded-lg shadow-xl z-10 whitespace-nowrap text-xs",children:[e.jsx("div",{className:"font-bold mb-1",children:s.orderId||s.item}),e.jsxs("div",{children:["Item: ",s.itemCode||s.extraCode]}),e.jsxs("div",{children:["Aantal: ",s.plan," stuks"]}),e.jsxs("div",{children:["Machine: ",s.machine]}),s.plannedDate&&e.jsxs("div",{children:["Datum: ",u(new Date(s.plannedDate.seconds*1e3),"dd-MM-yyyy")]})]})]},s.id):null})]})})]},t)})})]}),e.jsx("div",{className:"mt-6 bg-white rounded-2xl p-4 shadow-sm border-2 border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Status:"}),[{status:"planned",label:"Gepland",color:"bg-blue-500"},{status:"in_production",label:"In Productie",color:"bg-orange-500"},{status:"quality_check",label:"Controle",color:"bg-purple-500"},{status:"ready_to_ship",label:"Verzendklaar",color:"bg-emerald-500"},{status:"shipped",label:"Verzonden",color:"bg-slate-400"}].map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 ${t.color} rounded`}),e.jsx("span",{className:"text-xs text-slate-600",children:t.label})]},t.status))]})})]})};export{te as default};
